<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>Docker | leesei&#39;s notebook</title>

  <meta name="author" content="leesei">
  
  <meta name="description" content="Technical blog for the future me and other beings.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Docker">
  <meta property="og:site_name" content="leesei&#39;s notebook">

  
    <meta property="og:image" content>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>
</html>
 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">leesei&#39;s notebook</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">		
			<h1> Docker</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
	

			

	<!-- content -->
	<div class="mypage">		
	    <p>Docker packs your apps and services in a portable container.</p>
<p><a href="https://storify.com/eshamow/solomon-hykes-docker-way" target="_blank" rel="noopener">Docker Way</a><br>The Docker Engines provides the <a href="https://docs.docker.com/engine/api/" target="_blank" rel="noopener">Docker Remote API</a> and interface with container execution backend, Docker&#39;s own tools and tools from 3rd can interacts with this API to provide higher level features on Docker containers.<br><a href="https://www.youtube.com/watch?v=3N3n9FzebAA" target="_blank" rel="noopener">dotScale 2013 - Solomon Hykes - Why we built Docker - YouTube</a></p>
<p>On the contrary, <a href="http://www.boycottdocker.org/" target="_blank" rel="noopener">boycott docker</a>.</p>
<p><a href="http://www.docker.com/" target="_blank" rel="noopener">Docker - Build, Ship, and Run Any App, Anywhere</a><br><a href="https://docs.docker.com/engine/docker-overview/" target="_blank" rel="noopener">Docker overview | Docker Documentation</a><br><a href="https://docs.docker.com/" target="_blank" rel="noopener">Docker Docs</a> <a href="https://docs.docker.com/engine/reference/glossary/" target="_blank" rel="noopener">Docker Glossary</a><br><a href="http://docs.docker.com/engine/userguide/" target="_blank" rel="noopener">The Docker user guide</a></p>
<p><a href="https://github.com/veggiemonk/awesome-docker" target="_blank" rel="noopener">veggiemonk/awesome-docker: A curated list of Docker resources and projects</a></p>
<p><a href="http://www.docker.com/products/docker-engine" target="_blank" rel="noopener">Docker Engine | Docker</a><br><a href="https://blog.docker.com/category/engineering/" target="_blank" rel="noopener">Engineering | Docker Blog</a><br><a href="http://www.docker.com/products/resources" target="_blank" rel="noopener">Resources | Docker</a><br><a href="http://training.docker.com/" target="_blank" rel="noopener">Docker Training - Docker Training</a></p>
<p><a href="https://blog.docker.com/2016/05/docker-labs-docker-community/" target="_blank" rel="noopener">Introducing Two New Community Repositories: Docker Labs and Docker Community | Docker Blog</a><br><a href="https://github.com/docker/labs" target="_blank" rel="noopener">docker/labs: This is a collection of tutorials for learning how to use Docker with various tools. Contributions welcome.</a> !important<br><a href="https://github.com/docker/community" target="_blank" rel="noopener">docker/community</a><br><a href="https://github.com/docker/labs/tree/master/dockercon-us-2017" target="_blank" rel="noopener">labs/dockercon-us-2017 at master ¬∑ docker/labs</a></p>
<p><a href="https://www.youtube.com/watch?v=Q5POuMHxW-0" target="_blank" rel="noopener">Introduction to Docker - YouTube</a><br><a href="https://www.youtube.com/watch?v=pts6F00GFuU" target="_blank" rel="noopener">Docker at Spotify - YouTube</a><br><a href="https://www.youtube.com/watch?v=iYwPyjPhXXE" target="_blank" rel="noopener">Docker 101 session - YouTube</a><br><a href="https://www.youtube.com/watch?v=4W2YY-qBla0" target="_blank" rel="noopener">Docker 101: Dockerizing Your Infrastructure - YouTube</a><br><a href="https://www.youtube.com/watch?v=UV3cw4QLJLs" target="_blank" rel="noopener">Docker fundamentals: basics, storage, networking - Introduction to Docker - YouTube</a><br><a href="https://www.youtube.com/playlist?list=PLot-YkcC7wZ91Qf-ErxdR03fxu076VUhe" target="_blank" rel="noopener">Docker - YouTube</a> Level Up</p>
<p>Gist of Docker:</p>
<ul>
<li><a href="https://docs.docker.com/installation/" target="_blank" rel="noopener">Install</a> <a href="https://docs.docker.com/engine/" target="_blank" rel="noopener">Docker Engine</a></li>
<li>(optional) Use <a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener">Dockerfile</a> to create a <a href="https://docs.docker.com/engine/tutorials/dockerimages/" target="_blank" rel="noopener">Docker Image</a></li>
<li>Run the Images (built locally or pulled from Docker Registry/Docker Hub) in a Docker Container, see <a href="https://docs.docker.com/get-started/part2/#run-the-app" target="_blank" rel="noopener">Get Started, Part 2: Containers | Docker Documentation</a></li>
<li>Profit</li>
</ul>
<p><a href="https://gist.github.com/Francesco149/ce376cd83d42774ed39d34816b9e21db" target="_blank" rel="noopener">docker error creating new backup file &#39;/var/lib/dpkg/status-old&#39;: Invalid cross-device link</a><br>Docker overlay2 metacopy issue on Linux 4.19</p>
<a id="more"></a>

<p><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">Get Started | Docker Documentation</a> all the way to Swarm, Stack and Deployment<br><a href="https://docs.docker.com/engine/docker-overview/" target="_blank" rel="noopener">Docker overview | Docker Documentation</a><br><a href="https://blog.docker.com/category/engineering/" target="_blank" rel="noopener">Engineering Archives - Docker Blog</a><br><a href="https://medium.freecodecamp.org/a-beginners-guide-to-docker-how-to-create-your-first-docker-application-cc03de9b639f" target="_blank" rel="noopener">A beginner‚Äôs guide to Docker‚Ää‚Äî‚Äähow to create your first Docker application</a><br><a href="http://odewahn.github.io/docker-jumpstart/" target="_blank" rel="noopener">Docker Jumpstart</a><br><a href="https://github.com/wsargent/docker-cheat-sheet" target="_blank" rel="noopener">wsargent/docker-cheat-sheet: Docker Cheat Sheet</a><br><a href="https://medium.freecodecamp.org/demystifying-containers-101-a-deep-dive-into-container-technology-for-beginners-d7b60d8511c1" target="_blank" rel="noopener">Demystifying Containers 101: A Deep Dive Into Container Technology for Beginners</a><br><a href="https://dev.to/softchris/5-part-docker-series-beginner-to-master-3m1b" target="_blank" rel="noopener">5 part Docker series, beginner to master - DEV Community üë©‚Äçüíªüë®‚Äçüíª</a> !important<br><a href="https://hashnode.com/post/docker-tutorial-for-beginners-cjrj2hg5001s2ufs1nker9he2" target="_blank" rel="noopener">Docker Tutorial for Beginners - Hashnode</a><br><a href="http://www.linux-magazine.com/Issues/2018/215/Tutorials-Docker" target="_blank" rel="noopener">Tutorials ‚Äì Docker ¬ª Linux Magazine</a><br><a href="https://scotch.io/tutorials/getting-started-with-docker" target="_blank" rel="noopener">Getting Started with Docker | Scotch</a><br><a href="https://hackaday.com/2019/01/23/howto-docker-databases-and-dashboards-to-deal-with-your-data/" target="_blank" rel="noopener">Howto: Docker, Databases, and Dashboards to Deal with Your Data | Hackaday</a><br><a href="https://medium.com/coinmonks/docker-in-a-nutshell-6b3985a58d68" target="_blank" rel="noopener">Docker In A Nutshell ‚Äì Coinmonks ‚Äì Medium</a> macOS setup<br><a href="https://towardsdatascience.com/learn-enough-docker-to-be-useful-b7ba70caeb4b" target="_blank" rel="noopener">Learn Enough Docker to be Useful ‚Äì Towards Data Science</a> Part 1<br><a href="https://towardsdatascience.com/learn-enough-docker-to-be-useful-1c40ea269fa8" target="_blank" rel="noopener">Learn Enough Docker to be Useful ‚Äì Towards Data Science</a> Part 2<br><a href="https://towardsdatascience.com/learn-enough-docker-to-be-useful-b0b44222eef5" target="_blank" rel="noopener">Learn Enough Docker to be Useful ‚Äì Towards Data Science</a> Part 3<br><a href="https://towardsdatascience.com/slimming-down-your-docker-images-275f0ca9337e" target="_blank" rel="noopener">Slimming Down Your Docker Images ‚Äì Towards Data Science</a> Part 4</p>
<p><a href="http://www.dwmkerr.com/learn-docker-by-building-a-microservice/" target="_blank" rel="noopener">Learn Docker by Building a Microservice</a><br><a href="https://www.level-up.one/docker-tutorial-containers-vms/" target="_blank" rel="noopener">Docker Tutorial: Containers, VMs, and Docker for Beginners - Level UpLevel Up</a><br><a href="https://medium.freecodecamp.org/a-beginner-friendly-introduction-to-containers-vms-and-docker-79a9e3e119b" target="_blank" rel="noopener">A Beginner-Friendly Introduction to Containers, VMs and Docker</a><br><a href="https://towardsdatascience.com/learn-enough-docker-to-be-useful-b7ba70caeb4b" target="_blank" rel="noopener">Learn Enough Docker to be Useful ‚Äì Towards Data Science</a><br><a href="https://github.com/alexellis/handsondocker/" target="_blank" rel="noopener">alexellis/HandsOnDocker: Get hands-on with Docker through a dozen self-paced and progressive labs.</a><br><a href="http://docs.aws.amazon.com/AmazonECS/latest/developerguide/docker-basics.html" target="_blank" rel="noopener">Docker Basics - Amazon EC2 Container Service</a><br><a href="https://blog.codeship.com/cross-platform-docker-development-environment/" target="_blank" rel="noopener">Creating a Cross-platform Docker Development Environment | via @codeship</a></p>
<p><a href="http://stackoverflow.com/questions/21498832/in-docker-whats-the-difference-between-a-container-and-an-image" target="_blank" rel="noopener">In Docker, what&#39;s the difference between a container and an image? - Stack Overflow</a><br><a href="http://stackoverflow.com/questions/23735149/docker-image-vs-container" target="_blank" rel="noopener">Docker image vs container - Stack Overflow</a><br><a href="http://paislee.io/how-to-automate-docker-deployments/" target="_blank" rel="noopener">How to Automate Docker Deployments</a> image, container and image maintenance</p>
<p><a href="http://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">Docker ‚Äî‚Äî ‰ªéÂÖ•Èó®Âà∞ÂÆûË∑µ</a><br><a href="http://letong.gitbooks.io/docker/content/" target="_blank" rel="noopener">Docker ‰∏≠ÊñáÊïôÁ®ã</a><br><a href="http://joshhu.gitdbooks.io/dockercommands/content/" target="_blank" rel="noopener">ÂÖ®Èù¢ÊòìÊáÇÁöÑ Docker Êåá‰ª§Â§ßÂÖ®</a><br><a href="https://blog.lab99.org/post/docker-2016-07-14-faq.html" target="_blank" rel="noopener">Docker ÈóÆÁ≠îÂΩïÔºà100 ÈóÆÔºâ ¬∑ Â§ßÊ°•‰∏ãÁöÑËúóÁâõ</a></p>
<p><a href="http://stackoverflow.com/questions/16647069/should-i-use-vagrant-or-docker-io-for-creating-an-isolated-environment" target="_blank" rel="noopener">Should I use Vagrant or Docker.io for creating an isolated environment? - Stack Overflow</a><br><a href="http://devo.ps/blog/docker-dos-and-donts/" target="_blank" rel="noopener">Docker Do&#39;s And Don&#39;ts | devo.ps</a><br><a href="http://devo.ps/blog/vagrant-docker-and-ansible-wtf/" target="_blank" rel="noopener">Vagrant, Docker and Ansible. WTF? | devo.ps</a></p>
<p><a href="http://rominirani.com/2015/07/19/docker-tutorial-series/" target="_blank" rel="noopener">Docker Tutorial Series | iRomin</a><br><a href="http://jmkhael.hopto.org/tag/docker/" target="_blank" rel="noopener">docker - Head in the clouds...</a><br><a href="https://github.com/jmkhael/docker-playground" target="_blank" rel="noopener">jmkhael/docker-playground: Docker playground used in the Docker blog serie</a></p>
<p><a href="https://hackernoon.com/10-free-courses-to-learn-docker-for-programmers-and-devops-engineers-7ff2781fd6e0" target="_blank" rel="noopener">10 Free Courses to Learn Docker for Programmers and DevOps Engineers</a></p>
<p><a href="https://labs.ctl.io/" target="_blank" rel="noopener">CenturyLink Labs - How to Use Docker, CoreOS, Linux Containers, Cloud</a><br><a href="https://www.ctl.io/developers/" target="_blank" rel="noopener">Home - CenturyLink Cloud Developer Center</a><br><a href="http://gliderlabs.com/blog/" target="_blank" rel="noopener">Blog :: Glider Labs</a><br><a href="https://stacksmith.bitnami.com/?vero_conv=1304303901" target="_blank" rel="noopener">Bitnami Stacksmith</a><br><a href="https://blog.jessfraz.com/" target="_blank" rel="noopener">Jessie Frazelle&#39;s Blog: Home</a></p>
<p><a href="http://container42.com/" target="_blank" rel="noopener">Container42 ¬∑ Stuff I find interesting</a></p>
<p><a href="https://caylent.com/50-useful-docker-tools/" target="_blank" rel="noopener">50+ Useful Docker Tools | Caylent</a></p>
<p><a href="https://github.com/shekhargulati/52-technologies-in-2016/blob/master/39-docker/README.md" target="_blank" rel="noopener">52-technologies-in-2016/39-docker</a><br><a href="https://github.com/shekhargulati/52-technologies-in-2016/blob/master/40-docker-cron/README.md" target="_blank" rel="noopener">52-technologies-in-2016/40-docker-cron</a><br><a href="https://github.com/shekhargulati/52-technologies-in-2016/blob/master/42-docker-compose/README.md" target="_blank" rel="noopener">52-technologies-in-2016/42-docker-compose</a></p>
<h2 id="Play-with-docker"><a href="#Play-with-docker" class="headerlink" title="Play-with-docker"></a>Play-with-docker</h2><p><a href="http://play-with-docker.com" target="_blank" rel="noopener">Docker Playground</a><br><a href="https://github.com/play-with-docker/play-with-docker" target="_blank" rel="noopener">play-with-docker/play-with-docker: You know it, you use it, now it&#39;s time to improve it. PWD!.</a><br><a href="https://github.com/play-with-docker/training" target="_blank" rel="noopener">play-with-docker/training</a><br><a href="https://github.com/play-with-docker/play-with-docker.github.io" target="_blank" rel="noopener">play-with-docker/play-with-docker.github.io: Play with docker class-room repo</a></p>
<p><a href="https://github.com/jpetazzo/orchestration-workshop" target="_blank" rel="noopener">jpetazzo/orchestration-workshop</a> !important</p>
<h2 id="Videos"><a href="#Videos" class="headerlink" title="Videos"></a>Videos</h2><p><a href="https://www.youtube.com/user/dockerrun/playlists" target="_blank" rel="noopener">Docker - Playlists - YouTube</a></p>
<p><a href="https://blog.docker.com/2017/10/dockercon-eu-2017-videos-now-live/" target="_blank" rel="noopener">DockerCon EU 2017: All the videos are now live! - Docker Blog</a><br><a href="https://dockercon.docker.com/" target="_blank" rel="noopener">DockerCon Europe 2017 Videos</a><br><a href="https://www.youtube.com/playlist?list=PLkA60AVN3hh_dZhew2ypUarxhsh9T7ZEd" target="_blank" rel="noopener">DockerCon Europe 2017 - YouTube</a><br><a href="https://www.youtube.com/playlist?list=PLkA60AVN3hh8EwsMMvW1plvHbbNOoLJuG" target="_blank" rel="noopener">DockerCon EU 2017 Moby Summit - YouTube</a><br><a href="https://dockercon2018.hubs.vidyard.com/" target="_blank" rel="noopener">DockerCon SF 2018</a></p>
<p><a href="https://www.youtube.com/playlist?list=PLfXWzKEc7gHzFoaBOExlpakMOyPE57_7t" target="_blank" rel="noopener">Docker Learning Series - YouTube</a><br><a href="https://www.youtube.com/playlist?list=PL2We04F3Y_40PSZyTcOUuH4flMxbxkhDe" target="_blank" rel="noopener">Docker for the Absolute Beginners - YouTube</a></p>
<p>Production<br><a href="https://www.youtube.com/channel/UCFkOoM5xXS6hRs1lpw_8ydQ" target="_blank" rel="noopener">The Containerizers - YouTube</a><br><a href="https://www.youtube.com/watch?v=heBI7oQvHZU" target="_blank" rel="noopener">Docker features and tools by Tom Verelst - YouTube</a><br><a href="https://www.youtube.com/watch?v=Q5POuMHxW-0" target="_blank" rel="noopener">Introduction to Docker - YouTube</a> by dotCloud founder in 2013<br><a href="https://dockercon.docker.com/watch/WdAeLaLuSCNQwEp61YVXUt" target="_blank" rel="noopener">Taking Docker to Production: What You Need to Know and Decide - DockerCon Europe 2017 Videos</a></p>
<h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><p><a href="http://www.jayway.com/2015/03/21/a-not-very-short-introduction-to-docker/" target="_blank" rel="noopener">A Not Very Short Introduction to Docker - Jayway</a><br><a href="http://stackshare.io/posts/how-docker-was-born" target="_blank" rel="noopener">How Docker Was Born | StackShare</a><br><a href="http://stackshare.io/posts/how-docker-fits-into-the-current-devops-landscape" target="_blank" rel="noopener">How Docker Fits Into The Current DevOps Landscape | StackShare</a><br><a href="http://stackshare.io/posts/how-docker-manages-its-massive-open-source-project" target="_blank" rel="noopener">How Docker Manages Its Massive Open Source Project | StackShare</a></p>
<p>Docker started out using LXC, then <a href="https://github.com/docker/libcontainer" target="_blank" rel="noopener">docker/libcontainer</a>, then <a href="https://github.com/opencontainers/runc" target="_blank" rel="noopener">opencontainers/runc</a><br><a href="http://www.infoq.com/news/2014/03/docker_0_9" target="_blank" rel="noopener">Docker drops LXC as default execution environment</a><br><a href="http://blog.docker.com/2015/06/open-container-project-foundation/" target="_blank" rel="noopener">Docker and Broad Industry Coalition Unite to Create Open Container Project | Docker Blog</a><br><a href="http://blog.docker.com/2015/12/containerd-daemon-to-control-runc/" target="_blank" rel="noopener">Containerd: a daemon to control runC | Docker Blog</a></p>
<h2 id="perfmatters"><a href="#perfmatters" class="headerlink" title="#perfmatters"></a>#perfmatters</h2><p><a href="https://www.percona.com/blog/2016/02/11/measuring-docker-io-overhead/" target="_blank" rel="noopener">Measuring Docker IO overhead - MySQL Performance Blog</a><br><a href="https://www.percona.com/blog/2016/02/05/measuring-docker-cpu-network-overhead/" target="_blank" rel="noopener">Measuring Percona Server Docker CPU/network overhead - MySQL Performance Blog</a><br><a href="http://d.pr/f/Zjv65z/1BuMbZ8p" target="_blank" rel="noopener">HPE and Docker Reference Configuration for infrastructure optimization using Docker containers on... ‚Ä¢ Droplr‚Ñ¢</a></p>
<h2 id="Why-Docker"><a href="#Why-Docker" class="headerlink" title="Why Docker"></a>Why Docker</h2><p><a href="https://www.docker.com/why-docker" target="_blank" rel="noopener">Why Docker | Docker</a><br><a href="https://docs.docker.com/engine/#why-docker" target="_blank" rel="noopener">Why Docker?</a></p>
<p><a href="http://www.zdnet.com/article/docker-1-0-brings-container-technology-to-the-enterprise/" target="_blank" rel="noopener">Docker 1.0 brings container technology to the enterprise | ZDNet</a></p>
<p><a href="https://sreeninet.wordpress.com/2016/01/23/ci-cd-with-docker-jenkins-and-tutum/" target="_blank" rel="noopener">CI, CD with Docker, Jenkins and Tutum | Sreenivas Makam&#39;s Blog</a> mostly &quot;why Docker&quot;</p>
<p><a href="https://opensource.com/business/14/7/docker-through-hype" target="_blank" rel="noopener">Who&#39;s using Docker? | Opensource.com</a></p>
<p><a href="https://blog.docker.com/2016/02/containers-as-a-service-caas/" target="_blank" rel="noopener">Containers as a Service (CaaS) as your new platform for application development and operations | Docker Blog</a></p>
<p><a href="https://www.youtube.com/watch?v=-S8-lrm3iV4" target="_blank" rel="noopener">Immutable Awesomeness - Josh Corman and John Willis at DevOps Enterprise Summit 2015 - YouTube</a></p>
<h2 id="Ambassador-pattern"><a href="#Ambassador-pattern" class="headerlink" title="Ambassador pattern"></a>Ambassador pattern</h2><p><a href="https://docs.docker.com/engine/admin/ambassador_pattern_linking/" target="_blank" rel="noopener">Link via an ambassador container</a><br><a href="http://www.container42.com/2014/08/28/docker-grand-ambassador/" target="_blank" rel="noopener">Docker Grand Ambassador ¬∑ Container42</a></p>
<p><a href="https://www.ctl.io/developers/blog/post/deploying-multi-server-docker-apps-with-ambassadors/" target="_blank" rel="noopener">Deploying Multi-Server Docker Apps with Ambassadors - CenturyLink Cloud Developer Center</a><br><a href="https://github.com/CenturyLinkLabs/ctlc-docker-ambassador" target="_blank" rel="noopener">CenturyLinkLabs/ctlc-docker-ambassador</a><br><a href="https://github.com/SvenDowideit/dockerfiles/tree/master/ambassador" target="_blank" rel="noopener">dockerfiles/ambassador at master ¬∑ SvenDowideit/dockerfiles</a></p>
<p><a href="https://github.com/gliderlabs/connectable" target="_blank" rel="noopener">gliderlabs/connectable: Magic proxy for internal services</a></p>
<p>Ambassador pattern: if App container depends on Database container, always create the Database container on the same Docker host and link it to the App container. Whether the Database container is the real database or a proxy of a remote service is an implementation detail of the operation team.<br><a href="https://docs.docker.com/engine/admin/ambassador_pattern_linking/" target="_blank" rel="noopener">Link via an ambassador container</a></p>
<p><a href="http://www.virtualroadside.com/blog/index.php/2014/07/28/automated-docker-ambassadors-with-coreos-registrator-ambassadord/" target="_blank" rel="noopener">Automated docker ambassadors with CoreOS + registrator + ambassadord ¬´ Random thoughts along the roadside‚Ä¶</a></p>
<h2 id="Manageacloud"><a href="#Manageacloud" class="headerlink" title="Manageacloud"></a>Manageacloud</h2><p><a href="http://blog.manageacloud.com/entry/dockerising-puppet" target="_blank" rel="noopener">Dockerising Puppet | Official Manageacloud blog</a><br><a href="http://blog.manageacloud.com/entry/deploying-containers-using-docker-compose" target="_blank" rel="noopener">Deploying Containers using Docker Compose | Official Manageacloud blog</a></p>
<h2 id="Phusion"><a href="#Phusion" class="headerlink" title="Phusion"></a>Phusion</h2><p><a href="https://blog.phusion.nl/2015/01/20/baseimage-docker-fat-containers-treating-containers-vms/" target="_blank" rel="noopener">Baseimage-docker, fat containers and &quot;treating containers as VMs&quot;</a><br><a href="http://phusion.github.io/baseimage-docker/" target="_blank" rel="noopener">Baseimage-docker: A minimal Ubuntu base image modified for Docker-friendliness</a></p>
<h2 id="Linuxserver-io"><a href="#Linuxserver-io" class="headerlink" title="Linuxserver.io"></a>Linuxserver.io</h2><p><a href="https://www.linuxserver.io/" target="_blank" rel="noopener">Linuxserver.io - There&#39;s no place like 127.0.0.1</a><br><a href="https://www.linuxserver.io/index.php/2016/02/06/building-software-from-source-using-docker/" target="_blank" rel="noopener">Building software from source using Docker ‚Äì Linuxserver.io</a></p>
<h2 id="Nordic-APIs"><a href="#Nordic-APIs" class="headerlink" title="Nordic APIs"></a>Nordic APIs</h2><p><a href="http://nordicapis.com/docker-containers-and-apis-a-brief-overview/" target="_blank" rel="noopener">Docker Containers and APIs: A Brief Overview | Nordic APIs |</a><br><a href="http://nordicapis.com/api-driven-devops-spotlight-on-docker/" target="_blank" rel="noopener">API-Driven DevOps: Spotlight on Docker | Nordic APIs |</a></p>
<h2 id="InfoQ"><a href="#InfoQ" class="headerlink" title="InfoQ"></a>InfoQ</h2><p><a href="http://www.infoq.com/cn/dockerdeep/" target="_blank" rel="noopener">Ê∑±ÂÖ•ÊµÖÂá∫ Docker - InfoQ</a><br><a href="http://www.infoq.com/cn/dockers" target="_blank" rel="noopener">Docker - InfoQ cn</a><br><a href="http://www.infoq.com/docker-2" target="_blank" rel="noopener">Docker - InfoQ</a></p>
<p><a href="http://www.infoq.com/cn/articles/docker-turns-3" target="_blank" rel="noopener">Docker ‰∏âÂπ¥ÂõûÈ°æÔºöÊ¢¶ÊÉ≥‰æùÂú®Ôºå‰∫∫ÁîüÊ≠£ÂΩìÂπ¥</a><br><a href="http://www.infoq.com/presentations/immutable-servers-docker" target="_blank" rel="noopener">Easier, Better, Faster, Safer Deployment with Docker and Immutable Containers</a></p>
<h2 id="DigitalOcean"><a href="#DigitalOcean" class="headerlink" title="DigitalOcean"></a>DigitalOcean</h2><p><a href="https://www.digitalocean.com/community/tags/docker?type=tutorials" target="_blank" rel="noopener">Docker Tutorials | DigitalOcean</a><br><a href="https://www.digitalocean.com/community/tutorials/docker-explained-using-dockerfiles-to-automate-building-of-images" target="_blank" rel="noopener">Docker Explained: Using Dockerfiles to Automate Building of Images | DigitalOcean</a><br><a href="https://www.digitalocean.com/community/tutorial_series/the-docker-ecosystem" target="_blank" rel="noopener">The Docker Ecosystem | DigitalOcean</a><br><a href="https://www.digitalocean.com/community/tutorials/docker-explained-how-to-containerize-and-use-nginx-as-a-proxy" target="_blank" rel="noopener">Docker Explained: How To Containerize and Use Nginx as a Proxy | DigitalOcean</a></p>
<h2 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h2><blockquote>
<p>With Swarm mode&#39;s multi-node overlay network and service discovery built-in, I consider linking container on single host over <code>bridge</code> network obsolete.<br>Use Docker&#39;s overlay by default, for complex use cases see <code>kubernetes#cni</code></p>
</blockquote>
<p><a href="https://pythonspeed.com/articles/docker-connection-refused/" target="_blank" rel="noopener">Connection refused? Docker networking and how it impacts your image</a> fundamental, network interfaces, listen on 0.0.0.0</p>
<p><a href="https://docs.docker.com/network/" target="_blank" rel="noopener">Networking Overview | Docker Documentation</a><br><a href="https://success.docker.com/article/networking" target="_blank" rel="noopener">Docker - Docker Reference Architecture: Designing Scalable, Portable Docker Container Networks</a> about Docker Swarm<br>Ports bound by container are managed by the process <code>docker-proxy</code> for port forwarding.<br>Use <code>netstat -nlt</code> to list all listening TCP ports in <em>numeric</em> format.</p>
<p><a href="https://blog.docker.com/2016/03/docker-networking-design-philosophy/" target="_blank" rel="noopener">Docker Networking Design Philosophy | Docker Blog</a><br><a href="http://thenewstack.io/container-networking-breakdown-explanation-analysis/" target="_blank" rel="noopener">Container Networking: A Breakdown, Explanation and Analysis - The New Stack</a><br><a href="https://www.slideshare.net/SreenivasMakam/docker-networking-common-issues-and-troubleshooting-techniques" target="_blank" rel="noopener">Docker Networking - Common Issues and Troubleshooting Techniques</a></p>
<p><a href="https://sreeninet.wordpress.com/2016/07/29/service-discovery-and-load-balancing-internals-in-docker-1-12/amp/" target="_blank" rel="noopener">Service Discovery and Load balancing Internals in Docker 1.12 ‚Äì Sreenivas Makam&#39;s Blog</a> DNS strategy explained with Docker Swarm<br><a href="https://www.youtube.com/watch?v=Gwdo3fo6pZg" target="_blank" rel="noopener">Docker for Ops: Docker Ne<code>tworking Deep Di</code>ve, Considerations and Troubleshooting - Docker Track - YouTube</a></p>
<p>Docker acquired SocketPlane to improve libnetwork, released with Docker 1.9 late 2015.<br><a href="https://github.com/docker/libnetwork/blob/master/docs/design.md" target="_blank" rel="noopener">libnetwork/design.md at master ¬∑ docker/libnetwork</a><br><a href="https://github.com/docker/docker/blob/master/experimental/vlan-networks.md" target="_blank" rel="noopener">docker/vlan-networks.md at master ¬∑ docker/docker</a><br><a href="https://github.com/docker/libnetwork/issues" target="_blank" rel="noopener">Issues ¬∑ docker/libnetwork</a></p>
<p>libnetwork issues:<br><a href="https://github.com/docker/libnetwork/issues/1447" target="_blank" rel="noopener">MacVLAN. A network locks the gateway ip preventing to assign it ¬∑ Issue #1447 ¬∑ docker/libnetwork</a><br>UDP failure, fixed in 17.05<br><a href="https://github.com/moby/moby/issues/8795" target="_blank" rel="noopener">Failed to receive UDP traffic after container restart ¬∑ Issue #8795 ¬∑ moby/moby</a><br><a href="https://github.com/moby/moby/pull/32505" target="_blank" rel="noopener">Conntrack flush support by fcrisciani ¬∑ Pull Request #32505 ¬∑ moby/moby</a></p>
<p><a href="http://blog.oddbit.com/2014/08/11/four-ways-to-connect-a-docker/" target="_blank" rel="noopener">Four ways to connect a docker container to a local network - Odd Bits</a><br><a href="http://blog.oddbit.com/2018/03/12/using-docker-macvlan-networks/" target="_blank" rel="noopener">Odd Bits - Using Docker macvlan networks</a></p>
<p><a href="http://blog.kubernetes.io/2016/01/why-Kubernetes-doesnt-use-libnetwork.html" target="_blank" rel="noopener">Kubernetes: Why Kubernetes doesn‚Äôt use libnetwork</a><br>Docker used libnetwork and <a href="https://blog.docker.com/2015/04/docker-networking-takes-a-step-in-the-right-direction-2/" target="_blank" rel="noopener">Container Network Model (CNM)</a>, which are tightly coupled with Docker Engine. appC used Container Network Interface (CNI), which plays along with other ecosystem.</p>
<p><a href="https://zwischenzugs.com/2015/11/21/understanding-docker-network-namespaces/" target="_blank" rel="noopener">Understanding Docker ‚Äì Network Namespaces ‚Äì zwischenzugs</a><br><a href="https://www.youtube.com/watch?v=_WgUwUf1d34" target="_blank" rel="noopener">Introduction to Linux Network Namespaces - YouTube</a></p>
<p><a href="https://www.infoworld.com/article/3276604/containers/docker-tutorial-get-started-with-docker-networking.html" target="_blank" rel="noopener">Docker tutorial: Get started with Docker networking | InfoWorld</a></p>
<h3 id="Tungsten"><a href="#Tungsten" class="headerlink" title="Tungsten"></a>Tungsten</h3><p><a href="https://tungsten.io/" target="_blank" rel="noopener">Home - Tungsten Fabric</a> = Contrail<br><a href="https://www.sdxcentral.com/networking/sdn/definitions/juniper-contrail-controller/" target="_blank" rel="noopener">What is the Juniper Contrail Controller? ‚Äî SDxCentral.com</a></p>
<h3 id="Contiv"><a href="#Contiv" class="headerlink" title="Contiv"></a>Contiv</h3><p><a href="https://contiv.io/" target="_blank" rel="noopener">Contiv</a><br><a href="https://www.youtube.com/watch?v=55s4wAVbTM4" target="_blank" rel="noopener">Container Networking with Project Contiv - YouTube</a><br><a href="https://www.youtube.com/watch?v=GlNuapz0Oxg" target="_blank" rel="noopener">Contiv on Docker swarm mode using VLAN (L2) networking - YouTube</a></p>
<h3 id="Cilium"><a href="#Cilium" class="headerlink" title="Cilium"></a>Cilium</h3><p><a href="https://www.cilium.io/" target="_blank" rel="noopener">Cilium</a><br><a href="http://docs.cilium.io/en/stable/intro/" target="_blank" rel="noopener">Introduction to Cilium ‚Äî Cilium documentation</a></p>
<p><a href="http://www.infoworld.com/article/3185419/networking/cilium-leverages-linux-kernel-for-advanced-container-networking.html" target="_blank" rel="noopener">Linux kernel holds key for advanced container networking | InfoWorld</a></p>
<h3 id="Flannel"><a href="#Flannel" class="headerlink" title="Flannel"></a>Flannel</h3><p><a href="https://github.com/coreos/flannel" target="_blank" rel="noopener">coreos/flannel: flannel is a network fabric for containers, designed for Kubernetes</a></p>
<h3 id="Calico"><a href="#Calico" class="headerlink" title="Calico"></a>Calico</h3><p><a href="https://www.projectcalico.org/" target="_blank" rel="noopener">Project Calico - Secure Networking for the Cloud Native Era</a></p>
<p><a href="https://github.com/projectcalico/canal" target="_blank" rel="noopener">projectcalico/canal: Policy based networking for cloud native applications</a> Calico + flannel, deprecated<br><a href="https://docs.projectcalico.org/v3.8/getting-started/kubernetes/installation/flannel" target="_blank" rel="noopener">Installing Calico for policy and flannel for networking</a></p>
<h3 id="Weave"><a href="#Weave" class="headerlink" title="Weave"></a>Weave</h3><p><a href="https://www.weave.works/" target="_blank" rel="noopener">Docker container networking monitoring - Weaveworks</a><br><a href="https://github.com/weaveworks" target="_blank" rel="noopener">Weaveworks</a> GitHub org<br><a href="https://github.com/weaveworks/weave" target="_blank" rel="noopener">weaveworks/weave: Simple, resilient multi-host Docker networking</a></p>
<p><a href="https://www.weave.works/weave-discovery-and-docker-swarm/" target="_blank" rel="noopener">Weave Discovery and Docker Swarm - Weaveworks</a><br><a href="https://www.weave.works/guides/using-nginx-as-a-reverse-proxyload-balancer-with-weave-and-docker/" target="_blank" rel="noopener">Using Nginx as a reverse proxy/load balancer with Weave and Docker - Weaveworks</a></p>
<h3 id="Submariner"><a href="#Submariner" class="headerlink" title="Submariner"></a>Submariner</h3><p><a href="https://submariner.io/" target="_blank" rel="noopener">Cross-Cluster Network Connectivity for Kubernetes | Submariner</a> CSI compatible</p>
<p><a href="https://rancher.com/blog/2019/announcing-submariner-multi-cluster-kubernetes-networking/" target="_blank" rel="noopener">Announcing Submariner, Multi-Cluster Network Connectivity for Kubernetes</a><br><a href="https://containerjournal.com/2019/03/12/rancher-labs-launches-submariner-networking-project-for-kubernetes/amp/" target="_blank" rel="noopener">Rancher Labs Launches Submariner Networking Project for Kubernetes - Container Journal</a></p>
<p><a href="https://info.rancher.com/meetup-introducing-submariner-multicluster-networking" target="_blank" rel="noopener">Introducing Submariner: Multi-Cluster Network Connectivity</a></p>
<h2 id="Volumes"><a href="#Volumes" class="headerlink" title="Volumes"></a>Volumes</h2><p><a href="https://docs.docker.com/storage/volumes/" target="_blank" rel="noopener">Use volumes | Docker Documentation</a><br><a href="http://developerblog.redhat.com/2014/09/30/overview-storage-scalability-docker/" target="_blank" rel="noopener">Comprehensive Overview of Storage Scalability in Docker ‚Äì Red Hat Developer Blog</a><br><a href="http://blog.thoward37.me/articles/where-are-docker-images-stored/" target="_blank" rel="noopener">Where are Docker images stored? - Lounge Scene</a><br><a href="http://container-solutions.com/understanding-volumes-docker/" target="_blank" rel="noopener">Understanding Volumes in Docker - Container Solutions</a><br><a href="https://clusterhq.com/2015/12/09/difference-docker-volumes-flocker-volumes/" target="_blank" rel="noopener">Walkthrough: Docker Volumes vs Docker Volumes with Flocker ¬∑ ClusterHQ</a><br><a href="https://www.digitalocean.com/community/tutorials/how-to-share-data-between-docker-containers" target="_blank" rel="noopener">How To Share Data between Docker Containers | DigitalOcean</a><br><a href="https://www.digitalocean.com/community/tutorials/how-to-share-data-between-the-docker-container-and-the-host" target="_blank" rel="noopener">How To Share Data between the Docker Container and the Host | DigitalOcean</a><br><a href="https://hostpresto.com/community/tutorials/working-with-docker-volumes/" target="_blank" rel="noopener">Working with Docker Volumes</a><br><a href="http://www.infoworld.com/article/3106416/cloud-computing/containerizing-stateful-applications.html" target="_blank" rel="noopener">Containerizing stateful applications | InfoWorld</a><br><a href="https://www.infoworld.com/article/3269521/containers/docker-tutorial-get-started-with-docker-volumes.html" target="_blank" rel="noopener">Docker tutorial: Get started with Docker volumes | InfoWorld</a><br><a href="https://medium.com/@RavinduNOnline/docker-containers-and-persistent-data-9cbe5eaf68fe" target="_blank" rel="noopener">Docker Containers and Persistent Data ‚Äì Ravindu N Fernando ‚Äì Medium</a></p>
<p><a href="http://www.container42.com/2014/11/03/docker-indepth-volumes/" target="_blank" rel="noopener">Docker In-depth: Volumes ¬∑ Container42</a><br><a href="http://container42.com/2013/12/16/persistent-volumes-with-docker-container-as-volume-pattern/" target="_blank" rel="noopener">Persistent volumes with Docker - Data-only container pattern ¬∑ Container42</a><br><a href="http://www.container42.com/2014/11/18/data-only-container-madness/" target="_blank" rel="noopener">Data-only container madness ¬∑ Container42</a><br><a href="https://stackoverflow.com/a/33232991/665507" target="_blank" rel="noopener">dockerfile - Docker: Mount directory from one container to another - Stack Overflow</a> data only container and <code>--volumes from</code></p>
<p><a href="https://docs.docker.com/engine/reference/commandline/volume_create/" target="_blank" rel="noopener">Named volumes</a> <a href="https://github.com/docker/docker/issues/17798" target="_blank" rel="noopener">replaces</a> data-only containers since 1.9.<br><a href="http://stackoverflow.com/questions/23544282/what-is-the-best-way-to-manage-permissions-for-docker-shared-volumes" target="_blank" rel="noopener">What is the (best) way to manage permissions for docker shared volumes - Stack Overflow</a></p>
<p><a href="https://blog.docker.com/2015/12/persistent-storage-docker/" target="_blank" rel="noopener">Docker Webinar Q&amp;A: Persistent Storage &amp; Docker - Docker Blog</a><br><a href="https://docker.wistia.com/medias/2pz7q0awzh" target="_blank" rel="noopener">Part 1: Docker Basics: Understanding Union Filesystems, Storage and Volumes - docker</a><br><a href="https://docker.wistia.com/medias/zix9n9eesq" target="_blank" rel="noopener">Part 2: Docker Storage Considerations - docker</a><br><a href="https://docker.wistia.com/medias/6m689744b4" target="_blank" rel="noopener">Part 3: Persistent Storage, Data and Docker - docker</a><br><a href="https://docs.docker.com/engine/extend/legacy_plugins/#volume-plugins" target="_blank" rel="noopener">Use Docker Engine Volume plugins | Docker Documentation</a></p>
<p><a href="https://github.com/moby/moby/issues/30770#issuecomment-310283484" target="_blank" rel="noopener">templated volume name syntax not supported in compose v3 format? ¬∑ Issue #30770 ¬∑ moby/moby</a> using templated volume name in swarm mode</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># create data volume</span></span><br><span class="line">docker create -v /var/lib/mysql --name data-mysql busybox /bin/<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># copy data files to /backup</span></span><br><span class="line">docker run --volumes-from data-mysql mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># copy data files to /backup</span></span><br><span class="line">docker run --rm --volumes-from data-mysql -v HOST_BACKUP:/backup -it busybox sh</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/gdiepen/docker-convenience-scripts" target="_blank" rel="noopener">gdiepen/docker-convenience-scripts</a> <code>docker_clone_volume.sh</code><br><a href="http://flavio.aiello.ch/nfs4-docker-stacks/" target="_blank" rel="noopener">Nfs4 Docker Stacks - flavio.aiello.ch</a></p>
<h3 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h3><p>Docker started out using AUFS (a union file system) for storage, but AUFS didn&#39;t make it into mainstream Linux kernel. Many distro now uses device mapper or the new OverlayFS.<br><a href="https://docs.docker.com/engine/userguide/storagedriver/" target="_blank" rel="noopener">Docker storage drivers | Docker Documentation</a><br><a href="https://docs.docker.com/engine/userguide/storagedriver/imagesandcontainers/" target="_blank" rel="noopener">About images, containers, and storage drivers | Docker Documentation</a><br><a href="https://blog.docker.com/2015/10/docker-basics-webinar-qa/" target="_blank" rel="noopener">Docker Basics Webinar Q&amp;A: Understanding Union Filesystems, Storage and Volumes | Docker Blog</a><br><a href="http://www.computerweekly.com/feature/Docker-storage-101-How-storage-works-in-Docker" target="_blank" rel="noopener">Docker storage 101: How storage works in Docker</a><br><a href="https://blog.codeship.com/docker-storage-introduction/" target="_blank" rel="noopener">Docker Storage: An Introduction - via @mazembo | via @codeship</a><br><a href="https://blog.jessfraz.com/post/the-brutally-honest-guide-to-docker-graphdrivers/" target="_blank" rel="noopener">Jessie Frazelle&#39;s Blog: The Brutally Honest Guide to Docker Graphdrivers</a><br><a href="https://jpetazzo.github.io/assets/2015-03-03-not-so-deep-dive-into-docker-storage-drivers.html" target="_blank" rel="noopener">Docker Storage Drivers</a></p>
<p><a href="https://www.youtube.com/watch?v=X_q2l8hotAc" target="_blank" rel="noopener">Docker for Ops: Docker Storage and Volumes Deep Dive and Considerations - Docker Track - YouTube</a></p>
<h3 id="3rd-Party-Storage-Drivers"><a href="#3rd-Party-Storage-Drivers" class="headerlink" title="3rd Party Storage Drivers"></a>3rd Party Storage Drivers</h3><p><a href="http://www.admin-magazine.com/Articles/Persistent-volumes-for-Docker-containers" target="_blank" rel="noopener">Docker Persistent Volumes ¬ª ADMIN Magazine</a></p>
<p><a href="https://rexray.io/" target="_blank" rel="noopener">REX-Ray</a> <a href="http://rexray.readthedocs.io/en/stable/" target="_blank" rel="noopener">docs</a><br><a href="https://github.com/rexray/rexray" target="_blank" rel="noopener">rexray/rexray: REX-Ray is a container storage orchestration engine enabling persistence for cloud native workloads</a></p>
<p><a href="https://github.com/rancher/convoy" target="_blank" rel="noopener">rancher/convoy: A Docker volume plugin, managing persistent container volumes.</a> <a href="https://forums.rancher.com/t/is-convoy-project-deprecated/8403" target="_blank" rel="noopener">deprecated</a></p>
<p><a href="https://github.com/ContainX/docker-volume-netshare" target="_blank" rel="noopener">ContainX/docker-volume-netshare: Docker NFS, AWS EFS, Ceph &amp; Samba/CIFS Volume Plugin</a></p>
<p><a href="https://github.com/ClusterHQ/flocker" target="_blank" rel="noopener">ClusterHQ/flocker: Container data volume manager for your Dockerized application</a></p>
<blockquote>
<p>ClusterHQ shut down in 2016-12</p>
</blockquote>
<h2 id="Docker-Engine-API"><a href="#Docker-Engine-API" class="headerlink" title="Docker Engine API"></a>Docker Engine API</h2><p>Communicate to Docker Engine with HTTP API via <code>unix:///var/run/docker.sock</code></p>
<p><a href="https://docs.docker.com/develop/sdk/" target="_blank" rel="noopener">Develop with Docker Engine SDKs and API | Docker Documentation</a><br><a href="https://docs.docker.com/develop/sdk/examples/" target="_blank" rel="noopener">Examples using the Docker Engine SDKs and Docker API | Docker Documentation</a><br><a href="https://docs.docker.com/engine/api/version-history/" target="_blank" rel="noopener">Engine API version history | Docker Documentation</a><br><a href="https://docs.docker.com/engine/api/latest/" target="_blank" rel="noopener">Docker Engine API Reference</a></p>
<p><a href="https://godoc.org/github.com/moby/moby/client" target="_blank" rel="noopener">moby/client - GoDoc</a><br><a href="https://docker-py.readthedocs.io/en/stable/" target="_blank" rel="noopener">Docker SDK for Python ‚Äî Docker SDK for Python 2.0 documentation</a></p>
<p><a href="https://github.com/apocas/dockerode" target="_blank" rel="noopener">apocas/dockerode: Docker Remote API Node.js Client module</a><br><a href="https://github.com/fsouza/go-dockerclient" target="_blank" rel="noopener">fsouza/go-dockerclient: Go client for the Docker remote API.</a></p>
<h2 id="Docker-Registry"><a href="#Docker-Registry" class="headerlink" title="Docker Registry"></a>Docker Registry</h2><p>The Docker Hub is the official hosted registry service by Docker for building and shipping application or service containers. <a href="https://docs.docker.com/docker-hub/builds/" target="_blank" rel="noopener">Automated Builds</a> can build image upon repo change. The problem is it requires R/W access to all user repo and it does not have good <a href="https://success.docker.com/article/docker-hub-user-notification" target="_blank" rel="noopener">track</a> <a href="https://www.reddit.com/r/linux/comments/bi0em8/docker_hub_hacked_190k_accounts_github_tokens" target="_blank" rel="noopener">record</a>.</p>
<p><a href="https://hub.docker.com/explore/" target="_blank" rel="noopener">Docker Hub</a><br><a href="https://docs.docker.com/docker-hub/overview/" target="_blank" rel="noopener">Introducing Docker Hub</a><br><a href="https://www.linux.com/learn/integrating-docker-hub-your-application-build-process" target="_blank" rel="noopener">Integrating Docker Hub In Your Application Build Process | Linux.com | The source for Linux information</a></p>
<p><a href="https://blog.codeship.com/overview-of-docker-registries/" target="_blank" rel="noopener">An Overview of Docker Registries - via @codeship | via @codeship</a><br><a href="http://rancher.com/comparing-four-hosted-docker-registries/" target="_blank" rel="noopener">Rancher Labs | Comparing Four Hosted Docker Registries | Rancher Labs</a><br><a href="https://mesosphere.com/blog/2015/10/14/docker-registries-the-good-the-bad-the-ugly/" target="_blank" rel="noopener">Docker Registries: the Good, the Bad &amp; the Ugly</a><br><a href="https://nickjanetakis.com/blog/docker-tip-50-running-an-insecure-docker-registry" target="_blank" rel="noopener">Docker Tip #50: Running an Insecure Docker Registry ‚Äî Nick Janetakis</a><br><a href="https://rancher.com/comparing-four-hosted-docker-registries/" target="_blank" rel="noopener">Hosted Docker Registry | Deploy Docker Container | Rancher</a><br><a href="https://rancher.com/container-registries-might-missed/" target="_blank" rel="noopener">Container Registries You Might Have Missed</a> hosted and self-hosted</p>
<p><a href="https://quay.io/" target="_blank" rel="noopener">Quay</a> also provides hosting of Docker images and automated builds.</p>
<p><a href="https://microbadger.com/#/" target="_blank" rel="noopener">MicroBadger</a> Link your Docker image and the<br>source it was built from</p>
<h3 id="Docker-Hub-Automated-build"><a href="#Docker-Hub-Automated-build" class="headerlink" title="Docker Hub Automated build"></a>Docker Hub Automated build</h3><p><a href="https://docs.docker.com/docker-hub/builds/" target="_blank" rel="noopener">Configure automated builds on Docker Hub | Docker Documentation</a></p>
<p>To trigger the automated build:</p>
<ol>
<li>push empty commit to your repo; OR</li>
<li>go the</li>
</ol>
<h3 id="Docker-Registry-1"><a href="#Docker-Registry-1" class="headerlink" title="Docker Registry"></a>Docker Registry</h3><p>You can host your own <a href="https://docs.docker.com/registry/" target="_blank" rel="noopener">Docker Registry</a>.<br><a href="https://docs.docker.com/registry/deploying/" target="_blank" rel="noopener">Deploy a registry server | Docker Documentation</a><br><a href="http://port.us.org/docs/How-to-setup-secure-registry.html" target="_blank" rel="noopener">Configuring a secure private registry</a><br><a href="https://blog.hasura.io/sharing-a-local-registry-for-minikube-37c7240d0615" target="_blank" rel="noopener">Sharing a local registry with minikube ‚Äì Hasura</a><br><a href="https://medium.com/@pcj/your-own-private-docker-repository-with-digitalocean-and-caddy-aug-26-2017-3e30859363ae" target="_blank" rel="noopener">Your own private docker registry with digitalocean and caddy</a><br><a href="https://forums.rancher.com/t/rancher-2-private-docker-registry/12541/2" target="_blank" rel="noopener">Rancher 2 Private Docker Registry? - Rancher 2.x - Rancher Forums</a><br>Docker Engine would not pull from non TLS registry by default, do use HTTPS.<br>You have to add your self-signed cert to Docker daemon AND restart it to be able to pull from private registry.</p>
<p><a href="https://github.com/docker/distribution" target="_blank" rel="noopener">docker/distribution: The Docker toolset to pack, ship, store, and deliver content</a> Distribution = Registry v2, the new implementation<br><a href="https://hub.docker.com/_/registry/" target="_blank" rel="noopener">library/registry - Docker Hub</a><br><a href="https://github.com/BlackGlory/caddy-proxy" target="_blank" rel="noopener">BlackGlory/caddy-proxy: Automated caddy proxy for Docker containers using docker-gen</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -d -p 5000:5000 \</span><br><span class="line">  -v $(<span class="built_in">pwd</span>)/config.yml:/etc/docker/registry/config.yml \</span><br><span class="line">  --name=docker_registry \</span><br><span class="line">  registry:2</span><br></pre></td></tr></table></figure>

<p><a href="http://port.us.org/" target="_blank" rel="noopener">Portus</a> authorization service for your Docker registry</p>
<p>On Swarm Mode setup, each node can use the Registry at <code>localhost:5000</code>.</p>
<h4 id="Deleting-images"><a href="#Deleting-images" class="headerlink" title="Deleting images"></a>Deleting images</h4><p><a href="https://stackoverflow.com/a/48950176/665507" target="_blank" rel="noopener">Docker Registry 2.0 - how to delete unused images? - Stack Overflow</a><br><a href="https://docs.docker.com/registry/garbage-collection/" target="_blank" rel="noopener">Garbage collection | Docker Documentation</a></p>
<p>Deleting images is <a href="https://blog.lab99.org/post/docker-2016-07-14-faq.html#ru-he-shan-chu-si-you-registry-zhong-de-jing-xiang" target="_blank" rel="noopener">a bit trickery</a>, you have to enable the config, use digest to DELETE, and manually run GC<br><a href="https://github.com/burnettk/delete-docker-registry-image" target="_blank" rel="noopener">burnettk/delete-docker-registry-image: If you are running a private v2 docker registry, and you are storing your data on disk, running this script from the machine where the data lives will let you fully delete an image or tag</a></p>
<h3 id="Harbor"><a href="#Harbor" class="headerlink" title="Harbor"></a>Harbor</h3><p><a href="https://goharbor.io/" target="_blank" rel="noopener">Harbor</a><br><a href="https://www.youtube.com/watch?v=VOQG8w5bJxc" target="_blank" rel="noopener">Locking Down Kubernetes Security, Compliance with Harbor - YouTube</a></p>
<p>Harbor Registry is VMware&#39;s answer for hosting Docker images. This registry is built on the foundation of Docker Distribution, but it adds security and identity-management features. It also supports multiple registries on a single host.</p>
<p><a href="https://thenewstack.io/locking-down-kubernetes-security-compliance-with-harbor/" target="_blank" rel="noopener">Locking Down Kubernetes Security, Compliance with Harbor - The New Stack</a></p>
<h3 id="Notable-Images"><a href="#Notable-Images" class="headerlink" title="Notable Images"></a>Notable Images</h3><p><a href="https://github.com/docker-library/official-images" target="_blank" rel="noopener">docker-library/official-images: Docker Official Images</a></p>
<ul>
<li><a href="https://hub.docker.com/_/docker-dev/" target="_blank" rel="noopener">docker-dev</a></li>
<li><a href="https://hub.docker.com/_/ubuntu/" target="_blank" rel="noopener">ubuntu</a>, <a href="https://hub.docker.com/r/phusion/baseimage/" target="_blank" rel="noopener">phusion/baseimage/</a></li>
<li><a href="https://hub.docker.com/r/google/debian/" target="_blank" rel="noopener">google/debian</a></li>
<li><a href="https://hub.docker.com/_/wordpress/" target="_blank" rel="noopener">wordpress</a></li>
<li><a href="https://hub.docker.com/_/node/" target="_blank" rel="noopener">node</a> <a href="https://hub.docker.com/r/cusspvz/node/" target="_blank" rel="noopener">cusspvz/node/</a></li>
<li><a href="https://hub.docker.com/_/redmine/" target="_blank" rel="noopener">redmine</a> <a href="https://github.com/sameersbn/docker-redmine" target="_blank" rel="noopener">sameersbn/docker-redmine</a></li>
<li><a href="https://hub.docker.com/_/jenkins/" target="_blank" rel="noopener">jenkins</a></li>
<li><a href="https://hub.docker.com/r/cptactionhank/atlassian-jira-software/" target="_blank" rel="noopener">cptactionhank/atlassian-jira-software</a></li>
<li><a href="https://hub.docker.com/r/gitlab/gitlab-ce/" target="_blank" rel="noopener">gitlab/gitlab-ce</a></li>
<li><a href="https://hub.docker.com/_/mariadb/" target="_blank" rel="noopener">mariadb</a></li>
</ul>
<p><a href="https://github.com/cusspvz/node.docker" target="_blank" rel="noopener">cusspvz/node.docker: Super small Node.js container (~15MB) based on Alpine Linux OS</a><br><a href="https://github.com/BretFisher/node-docker-good-defaults" target="_blank" rel="noopener">BretFisher/node-docker-good-defaults: sample node app for Docker examples</a></p>
<p><a href="https://hub.docker.com/r/renoirb/nginx-http2-luajit/" target="_blank" rel="noopener">renoirb/nginx-http2-luajit/</a><br><a href="https://hub.docker.com/r/ficusio/openresty/" target="_blank" rel="noopener">ficusio/openresty/</a><br><a href="https://hub.docker.com/r/openresty/openresty/" target="_blank" rel="noopener">openresty/openresty</a></p>
<p><a href="https://github.com/axibase/dockers/tree/sftp" target="_blank" rel="noopener">axibase/dockers at sftp</a></p>
<p><a href="https://github.com/nicolaka/netshoot" target="_blank" rel="noopener">nicolaka/netshoot: a Docker + Kubernetes network trouble-shooting swiss-army container</a><br><a href="https://hub.docker.com/r/jgamblin/tcpdump/" target="_blank" rel="noopener">jgamblin/tcpdump/</a> <a href="http://jerrygamblin.com/2016/05/28/a-docker-container-to-capture-all-traffic-from-host/" target="_blank" rel="noopener">post</a></p>
<p><a href="https://hub.docker.com/u/sameersbn/" target="_blank" rel="noopener">u/sameersbn/</a> many useful CaaS and great instructions<br><a href="https://hub.docker.com/u/dperson/" target="_blank" rel="noopener">u/dperson/</a> many useful CaaS and great configuration script<br><a href="https://hub.docker.com/r/phusion/" target="_blank" rel="noopener">r/phusion/</a> of the Passenger fame</p>
<p><a href="https://hub.docker.com/r/dperson/samba/" target="_blank" rel="noopener">dperson/samba/</a><br><a href="https://hub.docker.com/r/dperson/gogs/" target="_blank" rel="noopener">dperson/gogs/</a></p>
<p><a href="https://hub.docker.com/u/centurylink/" target="_blank" rel="noopener">u/centurylink/</a><br><a href="https://hub.docker.com/r/centurylink/buildpack-runner/" target="_blank" rel="noopener">centurylink/buildpack-runner/</a></p>
<p><a href="https://hub.docker.com/u/linuxserver/" target="_blank" rel="noopener">u/linuxserver/</a> <a href="https://github.com/linuxserver" target="_blank" rel="noopener">source</a><br><a href="https://www.linuxserver.io/our-images/" target="_blank" rel="noopener">Images built by us - LinuxServer</a></p>
<p><a href="https://hub.docker.com/r/bitnami/" target="_blank" rel="noopener">r/bitnami/</a><br><a href="https://bitnami.com/docker" target="_blank" rel="noopener">Bitnami Container Images for Docker</a><br><a href="https://github.com/bitnami" target="_blank" rel="noopener">Bitnami on GitHub</a><br><a href="https://github.com/bitnami/bitnami-docker/blob/master/tutorials/subrion.md" target="_blank" rel="noopener">bitnami-docker/subrion.md at master ¬∑ bitnami/bitnami-docker</a> tutorial with Docker Compose</p>
<p><a href="https://github.com/tmc/dockerfiles/tree/master/devel" target="_blank" rel="noopener">dockerfiles/devel at master ¬∑ tmc/dockerfiles</a></p>
<h2 id="On-the-contrary"><a href="#On-the-contrary" class="headerlink" title="On the contrary"></a>On the contrary</h2><p><a href="https://valdhaus.co/writings/docker-misconceptions/" target="_blank" rel="noopener">Docker Misconceptions</a> tips/alternatives for using docker in production</p>
<p><a href="http://www.alexhudson.com/2013/05/28/a-first-look-at-docker-io/" target="_blank" rel="noopener">A first look at docker.io | woah!</a><br><a href="http://iops.io/blog/lxc-application-containers-docker-initial-thoughts/" target="_blank" rel="noopener">LXC containers are awesome, but Docker.io sucks | Cal Leeming Blog</a><br><a href="http://www.boycottdocker.org/" target="_blank" rel="noopener">boycott docker</a><br><a href="http://www.infoworld.com/article/2881462/virtualization/the-world-of-containers-doesnt-end-with-docker.html" target="_blank" rel="noopener">The world of containers doesn&#39;t end with Docker | InfoWorld</a><br>App packaged as container is great for portability, but replication, scalability and security requires helping hands from a larger ecosystem.<br><a href="http://www.vitavonni.de/blog/201503/2015031201-the-sad-state-of-sysadmin-in-the-age-of-containers.html" target="_blank" rel="noopener">The sad state of sysadmin in the age of containers</a> &quot;devops&quot; deploy untrusted container in production is a bad thing<br><a href="https://softwareengineeringdaily.com/2016/02/11/from-containers-and-docker-to-virtual-machines/" target="_blank" rel="noopener">Koding‚Äôs Migration From Containers to Virtual Machines | Software Engineering Daily</a></p>
<hr>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><blockquote>
<p>you do need latest Docker, the one in you distro is probably outdated<br>Arch Linux users should use the one in official repo</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># install script for most Linux distro</span></span><br><span class="line"><span class="comment"># &gt; I now recommend install from package!!</span></span><br><span class="line"><span class="comment"># !! need su !!</span></span><br><span class="line">curl -fsSL https://get.docker.com/ | sh</span><br><span class="line">systemctl <span class="built_in">enable</span> docker &amp;&amp; systemctl start docker</span><br><span class="line">usermod -aG docker $(id -un)</span><br><span class="line">docker -v  <span class="comment"># should &gt;= 17.05</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># https://github.com/docker/compose/releases</span></span><br><span class="line">curl -L https://github.com/docker/compose/releases/download/1.24.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">chmod a+x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://github.com/docker/machine/releases</span></span><br><span class="line">curl -L https://github.com/docker/machine/releases/download/v0.16.1/docker-machine-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-machine</span><br><span class="line">chmod a+x /usr/<span class="built_in">local</span>/bin/docker-machine</span><br></pre></td></tr></table></figure>

<p><a href="https://docs.docker.com/install/" target="_blank" rel="noopener">Install Docker Engine</a><br><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener">Get Docker CE for ubuntu | Docker Documentation</a> Install from package (this is troublesome after the package split in 18.09)<br><a href="https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/" target="_blank" rel="noopener">https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/</a><br><a href="https://www.bretfisher.com/install-docker-ppa-on-ubuntu-16-04/" target="_blank" rel="noopener">Install Docker PPA on Ubuntu 16.04 With Good Defaults</a><br><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-18-04" target="_blank" rel="noopener">How To Install and Use Docker on Ubuntu 18.04 | DigitalOcean</a> check repo used<br><a href="https://wiki.archlinux.org/index.php/Docker" target="_blank" rel="noopener">Docker - ArchWiki</a></p>
<h2 id="Windows-Mac"><a href="#Windows-Mac" class="headerlink" title="Windows/Mac"></a>Windows/Mac</h2><p><a href="https://blog.docker.com/2016/03/docker-for-mac-windows-beta/" target="_blank" rel="noopener">Docker for Mac and Windows Beta: the simplest way to use Docker on your laptop | Docker Blog</a><br><a href="http://www.infoworld.com/article/3163257/application-development/what-you-need-to-know-about-docker-in-windows.html" target="_blank" rel="noopener">What you need to know about Docker in Windows | InfoWorld</a> Windows Server 2016 support Docker natively<br><a href="https://blog.docker.com/2016/09/build-your-first-docker-windows-server-container/" target="_blank" rel="noopener">Build and run your first Docker Windows Server container - Docker Blog</a><br><a href="https://medium.freecodecamp.org/how-to-set-up-docker-and-windows-subsystem-for-linux-a-love-story-35c856968991" target="_blank" rel="noopener">How to set up Docker and Windows Subsystem for Linux: A Love Story. üíö</a></p>
<p><a href="http://collabnix.com/how-docker-for-mac-works-under-the-hood/" target="_blank" rel="noopener">Under the Hood: Demystifying Docker For Mac CE Edition ‚Äì Collabnix</a><br><a href="http://collabnix.com/top-5-exclusive-features-of-docker-for-mac-that-you-cant-afford-to-miss/" target="_blank" rel="noopener">Top 5 Exclusive Features of Docker For Mac That You Can‚Äôt Afford to Ignore ‚Äì Collabnix</a><br><a href="http://collabnix.com/namespace-context-toggling-made-easy-under-docker-for-mac-18-02-release/" target="_blank" rel="noopener">Context Switching Made Easy under Kubernetes powered Docker for Mac 18.02.0 ‚Äì Collabnix</a></p>
<h2 id="Quickstart"><a href="#Quickstart" class="headerlink" title="Quickstart"></a>Quickstart</h2><p><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">Get Started, Part 1: Orientation and setup | Docker Documentation</a><br><a href="https://blog.sourcerer.io/a-crash-course-on-docker-learn-to-swim-with-the-big-fish-6ff25e8958b0" target="_blank" rel="noopener">A crash course on Docker ‚Äî Learn to swim with the big fish</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker pull ubuntu:14.04</span><br><span class="line"><span class="comment"># created an interactive named container</span></span><br><span class="line">docker run -it --name ubuntu ubuntu:14.04 bash</span><br><span class="line"><span class="comment"># mounting your home and use it as working directory</span></span><br><span class="line">docker run -it -v /home/user:/home/user -w /home/user ubuntu:14.04 bash</span><br><span class="line"><span class="comment"># a read-only container with ram drives</span></span><br><span class="line">docker run --<span class="built_in">read</span>-only --tmpfs /run --tmpfs /tmp -it ubuntu:14.04 /bin/bash</span><br></pre></td></tr></table></figure>

<h2 id="Docker-CLI"><a href="#Docker-CLI" class="headerlink" title="Docker CLI"></a>Docker CLI</h2><p><a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener">Use the Docker command line</a><br>Config and aliases can be stored in <code>~/.docker/config.json</code></p>
<p><a href="http://chunchio.gitbooks.io/docker/content/DockerBasicCommand.html" target="_blank" rel="noopener">Docker Basic Command | Fast Deploying Systems With Docker</a><br><a href="https://github.com/wsargent/docker-cheat-sheet" target="_blank" rel="noopener">wsargent/docker-cheat-sheet: Docker Cheat Sheet</a><br><a href="https://github.com/j-bennet/wharfee" target="_blank" rel="noopener">j-bennet/wharfee: A CLI with autocompletion and syntax highlighting for Docker commands.</a><br><a href="https://www.bretfisher.com/docker-cli-tips-and-tricks/" target="_blank" rel="noopener">CLI Tips and Tricks (From Docker Online Meetup)</a><br><a href="https://mercurenews.com/en/10-tips-tricks-with-docker/" target="_blank" rel="noopener">10 Tips &amp; Tricks with Docker - Mercure News</a></p>
<p><a href="https://github.com/jmkhael/make-for-docker" target="_blank" rel="noopener">jmkhael/make-for-docker: Makefile to ease our Docker commands - http://jmkhael.io/makefiles-for-your-dockerfiles/</a><br><a href="https://github.com/j-bennet/wharfee" target="_blank" rel="noopener">j-bennet/wharfee: A CLI with autocompletion and syntax highlighting for Docker commands.</a></p>
<p><code>docker run IMAGE [CMD]</code>: create an container and execute command<br><code>docker create IMAGE</code>: create an container<br><code>docker exec CONTAINER CMD</code>: execute command in a running container<br><code>docker port CONTAINER</code>: list port mappings<br><code>docker ps</code>: list started containers<br><code>docker ps -as</code>: list all containers, with size (slower)<br><code>docker images</code>: list all images<br><code>docker cp</code>: copy file between a container and the host<br><code>docker rm CONTAINER</code>: remove container<br><code>docker rmi IMAGE</code>: remove image</p>
<h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><p><a href="https://docs.docker.com/engine/getstarted/step_six/#tag-push-and-pull-your-image" target="_blank" rel="noopener">Tag &amp; push your image</a></p>
<p>Full image tag: <code>[REGISTRYHOST/][USERNAME/]NAME[:TAG]</code><br>Image can be thought of as a static snapshot of a container.</p>
<p><code>docker build</code>: build <code>Dockerfile</code> as image<br><code>docker history</code>: list layers and commands creating it<br><code>docker pull|push IMAGE</code>: pull/push image from/to Docker Hub (<a href="https://docs.docker.com/docker-hub/builds/" target="_blank" rel="noopener">Automated Builds</a> does this for git repo)<br><code>docker diff CONTAINER</code>: view changes to file system<br><code>docker commit CONTAINER IMAGE</code>: save container (with modification) as image<br><code>docker export CONTAINER</code>: export container as tarball (used for flattening layers)<br><code>docker import TAR</code>: create an image from docker<br><code>docker tag IMAGE TAG</code>: add image to namespace (user)<br><code>docker push IMAGE</code>: publish image to Docker Hub<br><code>docker save -o TAR IMAGE</code>: save image as tar<br><code>docker load -i TAR</code>: load local image</p>
<p><a href="http://tuhrig.de/difference-between-save-and-export-in-docker/" target="_blank" rel="noopener">Difference between save and export in Docker ‚Äì Thomas Uhrig</a><br><a href="https://blog.giantswarm.io/moving-docker-container-images-around/" target="_blank" rel="noopener">Moving Docker Containers and Images Around</a><br>TL;DR: save/load preserves layers and tags, export/import don&#39;t</p>
<h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a><code>docker run</code></h3><p><a href="https://docs.docker.com/engine/reference/run/" target="_blank" rel="noopener">Docker run reference</a></p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Remark</th>
</tr>
</thead>
<tbody><tr>
<td><code>-it</code></td>
<td>create an interactive TTY; <kbd>Ctrl</kbd> + <kbd>P</kbd>, <kbd>Ctrl</kbd> + <kbd>Q</kbd> to from it</td>
</tr>
<tr>
<td><code>-v SRC:TARGET</code></td>
<td>mount volume to container, SRC can be an absolute path on Docker Host or a Docker volume name</td>
</tr>
<tr>
<td><code>-w</code></td>
<td>specify working directory</td>
</tr>
<tr>
<td><code>-p P1:P2</code></td>
<td>map host&#39;s port P1 to port P2 in container, omitting P1 to bind to random Host port</td>
</tr>
<tr>
<td><code>-P</code></td>
<td>publish all exposed ports to random ports on host</td>
</tr>
<tr>
<td><code>-e</code></td>
<td>set environment variable</td>
</tr>
<tr>
<td><code>-h</code></td>
<td>set hostname of container</td>
</tr>
<tr>
<td><code>-l</code></td>
<td>set label of container</td>
</tr>
<tr>
<td><code>-a</code></td>
<td>attach to a running container</td>
</tr>
<tr>
<td><code>-d</code></td>
<td>run container in detached mode, returns CONTAINER_ID; <code>docker attach CONTAINER</code> to attach to it later</td>
</tr>
<tr>
<td><code>--rm</code></td>
<td>remove container upon exit</td>
</tr>
<tr>
<td><code>--read-only</code></td>
<td>make RFS read only</td>
</tr>
</tbody></table>
<h2 id="Builder"><a href="#Builder" class="headerlink" title="Builder"></a>Builder</h2><p><a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener">Dockerfile</a><br><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener">Best practices for writing Dockerfiles | Docker Documentation</a></p>
<p><a href="https://medium.com/@tonistiigi/build-secrets-and-ssh-forwarding-in-docker-18-09-ae8161d066" target="_blank" rel="noopener">Build secrets and SSH forwarding in Docker 18.09 ‚Äì T√µnis Tiigi ‚Äì Medium</a><br><a href="https://pythonspeed.com/articles/docker-build-secrets/" target="_blank" rel="noopener">Docker build secrets, the sneaky way</a></p>
<p><a href="https://jaxenter.com/build-containers-quickly-buildah-155839.html" target="_blank" rel="noopener">Buildah: Build containers fast and easy without Docker - JAXenter</a></p>
<p>Builder log (annotated):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/3 : FROM ubuntu:xenial</span><br><span class="line"> ---&gt; 747cb2d60bbe                              # image ID</span><br><span class="line">Step 2/3 : RUN touch /tmp/foo</span><br><span class="line"> ---&gt; Running in 123624a3b7e7                   # container ID</span><br><span class="line"> ---&gt; bb7b8fc505de                              # committed image ID</span><br><span class="line">Step 3/3 : RUN touch /tmp/bar</span><br><span class="line"> ---&gt; Running in a595d46e5ea5                   # container ID</span><br><span class="line"> ---&gt; 8e1a34ff9fb7                              # committed image ID</span><br><span class="line">Removing intermediate container 123624a3b7e7</span><br><span class="line">Removing intermediate container a595d46e5ea5</span><br><span class="line">Successfully built 8e1a34ff9fb7                 # image ID to be tagged</span><br><span class="line">Successfully tagged demo:latest</span><br></pre></td></tr></table></figure>

<p>So you can actually <code>docker run bb7b8fc505de ls /tmp</code> to see only <code>foo</code> but not <code>bar</code>.<br>This actually sets breakpoint in your Dockerfile for debugging.</p>
<p><a href="https://github.com/opencontainers/image-spec/blob/master/annotations.md" target="_blank" rel="noopener">image-spec/annotations.md at master ¬∑ opencontainers/image-spec</a><br><a href="https://www.youtube.com/watch?v=j4SZ1qoR8Hs" target="_blank" rel="noopener">Shipping Manifests, Bill of Lading and Docker - Metadata for Containers - YouTube</a> <a href="https://speakerdeck.com/garethr/shipping-manifests-bill-of-lading-and-docker-metadata-and-container" target="_blank" rel="noopener">slides</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--label org.opencontainers.image.created=$(date --iso-8601=s)</span><br><span class="line">--org.opencontainers.image.revision=$(git rev-parse HEAD)</span><br></pre></td></tr></table></figure>

<p><a href="https://gist.github.com/wjordan/f9f640727c06d46172e6" target="_blank" rel="noopener">Dockerize: A tiny replacement for Dockerfiles</a></p>
<p><a href="http://crosbymichael.com/dockerfile-best-practices.html" target="_blank" rel="noopener">Dockerfile Best Practices</a><br><a href="http://crosbymichael.com/dockerfile-best-practices-take-2.html" target="_blank" rel="noopener">Dockerfile Best Practices - take 2</a><br><a href="https://blog.docker.com/2019/07/intro-guide-to-dockerfile-best-practices/" target="_blank" rel="noopener">Intro Guide to Dockerfile Best Practices - Docker Blog</a><br><a href="https://dzone.com/articles/understanding-amp-creating-effective-docker-images" target="_blank" rel="noopener">Understanding and Creating Effective Docker Images - DZone Cloud</a><br><a href="https://developer.atlassian.com/blog/2016/06/common-dockerfile-mistakes/" target="_blank" rel="noopener">Common Dockerfile Mistakes - Atlassian Developers</a><br><a href="https://runnable.com/blog/9-common-dockerfile-mistakes" target="_blank" rel="noopener">9 Common Dockerfile Mistakes - Runnablog</a><br><a href="http://kimh.github.io/blog/en/docker/gotchas-in-writing-dockerfile-en/" target="_blank" rel="noopener">Gotchas in Writing Dockerfile | kim hirokuni</a><br><a href="http://lenguyenthedat.com/docker-cache/" target="_blank" rel="noopener">Docker cache and apt-get update. ‚Äì Dat&#39;s homepage</a> <code>update</code> and <code>install</code> in the same <code>RUN</code><br><a href="http://jonathan.bergknoff.com/journal/building-good-docker-images" target="_blank" rel="noopener">Jonathan Bergknoff: Building Good Docker Images</a><br><a href="http://www.projectatomic.io/docs/docker-image-author-guidance/" target="_blank" rel="noopener">Guidance for Docker Image Authors ‚Äî Project Atomic</a><br><a href="https://codefresh.io/blog/not-ignore-dockerignore/" target="_blank" rel="noopener">Do not ignore .dockerignore (it&#39;s expensive and potentially dangerous) - Codefresh</a><br><a href="https://zwischenzugs.com/2018/04/23/unprivileged-docker-builds-a-proof-of-concept/" target="_blank" rel="noopener">Unprivileged Docker Builds ‚Äì A Proof of Concept ‚Äì zwischenzugs</a></p>
<p><a href="https://www.ctl.io/developers/blog/post/caching-docker-images" target="_blank" rel="noopener">Caching Docker Images - CenturyLink Cloud Developer Center</a><br><a href="https://www.ctl.io/developers/blog/post/optimizing-docker-images/" target="_blank" rel="noopener">Optimizing Docker Images - CenturyLink Cloud Developer Center</a><br><a href="https://www.ctl.io/developers/blog/post/more-docker-image-cache-tips/" target="_blank" rel="noopener">How to Maximize Your Docker Image Caching Techniques - CenturyLink Cloud Developer Center</a><br><a href="https://www.ctl.io/developers/blog/post/dockerfile-add-vs-copy/" target="_blank" rel="noopener">Dockerfile: ADD vs COPY - CenturyLink Cloud Developer Center</a></p>
<h3 id="ARG-and-ENV"><a href="#ARG-and-ENV" class="headerlink" title="ARG and ENV"></a>ARG and ENV</h3><p><a href="https://vsupalov.com/docker-arg-env-variable-guide/" target="_blank" rel="noopener">Docker ARG, ENV and .env - a Complete Guide ¬∑ vsupalov</a><br><a href="https://blog.manifold.co/arguments-and-variables-in-docker-94746642f64b" target="_blank" rel="noopener">Arguments and variables in Docker ‚Äì manifoldco</a></p>
<h3 id="Multi-stage-builds"><a href="#Multi-stage-builds" class="headerlink" title="Multi-stage builds"></a>Multi-stage builds</h3><p><a href="https://docs.docker.com/engine/userguide/eng-image/multistage-build/" target="_blank" rel="noopener">Use multi-stage builds | Docker Documentation</a><br><a href="https://blog.alexellis.io/mutli-stage-docker-builds/" target="_blank" rel="noopener">Builder pattern vs. Multi-stage builds in Docker</a><br><a href="https://matthiasnoback.nl/2017/04/docker-build-patterns/" target="_blank" rel="noopener">Docker build patterns ‚Äî Matthias Noback - Blog</a><br><a href="https://medium.com/@xcoulon/straightforward-multi-stage-build-with-a-single-dockerfile-and-a-makefile-dd558fd9acff" target="_blank" rel="noopener">Straightforward multi-stage build with a single Dockerfile (and a Makefile)</a><br><a href="https://medium.com/@tonistiigi/advanced-multi-stage-build-patterns-6f741b852fae" target="_blank" rel="noopener">Advanced multi-stage build patterns ‚Äì T√µnis Tiigi ‚Äì Medium</a><br><a href="https://weeraman.com/lightweight-docker-images-with-alpine-5dc21936f689" target="_blank" rel="noopener">Lightweight Docker images with Alpine ‚Äì Anuradha Weeraman | Blog</a><br><a href="https://medium.com/@saabeilin/using-docker-multi-stage-builds-for-deploying-front-end-44ee6783322e" target="_blank" rel="noopener">Using docker multi-stage builds for deploying front-end</a><br><a href="https://blog.mikesir87.io/2018/07/leveraging-multi-stage-builds-single-dockerfile-dev-prod/" target="_blank" rel="noopener">Leveraging Multi-stage Builds to use a Single Dockerfile for Dev and Prod ‚Äì mikesir87&#39;s blog</a></p>
<p><a href="https://vsupalov.com/cache-docker-build-dependencies-without-volume-mounting/" target="_blank" rel="noopener">Can You Mount a Volume While Building Your Docker Image to Cache Dependencies? ¬∑ vsupalov</a> Use intermediate image</p>
<h3 id="Image-Analysis"><a href="#Image-Analysis" class="headerlink" title="Image Analysis"></a>Image Analysis</h3><p><a href="https://microbadger.com/" target="_blank" rel="noopener">MicroBadger</a><br><a href="https://microbadger.com/images/openjdk:11-slim" target="_blank" rel="noopener">https://microbadger.com/images/openjdk:11-slim</a></p>
<p><a href="https://dzone.com/articles/docker-layers-explained" target="_blank" rel="noopener">Docker Layers Explained - DZone Cloud</a></p>
<p><a href="https://github.com/wagoodman/dive" target="_blank" rel="noopener">wagoodman/dive: A tool for exploring each layer in a docker image</a><br><a href="https://github.com/shaded-enmity/docker-doug" target="_blank" rel="noopener">shaded-enmity/docker-doug: DOUG - DOcker Update Guard</a></p>
<p><a href="https://opensource.googleblog.com/2017/11/container-diff-for-comparing-container-images.html" target="_blank" rel="noopener">Introducing container-diff, a tool for quickly comparing container images | Google Open Source Blog</a><br><a href="https://github.com/GoogleContainerTools/container-diff" target="_blank" rel="noopener">GoogleContainerTools/container-diff: container-diff: Diff your Docker containers</a></p>
<p><a href="https://github.com/CenturyLinkLabs/dockerfile-from-image" target="_blank" rel="noopener">CenturyLinkLabs/dockerfile-from-image</a></p>
<p><a href="https://blog.codeship.com/container-image-immutability-power-metadata/" target="_blank" rel="noopener">Container Image Immutability and the Power of Metadata - via @codeship | via @codeship</a><br><a href="http://www.windsock.io/explaining-docker-image-ids/" target="_blank" rel="noopener">Explaining Docker Image IDs</a><br><a href="https://microbadger.com/" target="_blank" rel="noopener">MicroBadger</a><br><a href="http://stackoverflow.com/questions/29696656/finding-the-layers-and-layer-sizes-for-each-docker-image" target="_blank" rel="noopener">Finding the layers and layer sizes for each Docker image - Stack Overflow</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">history</span> IMAGE</span><br><span class="line">docker <span class="built_in">history</span> --no-trunc IMAGE</span><br></pre></td></tr></table></figure>

<h2 id="Builder-3rd-party"><a href="#Builder-3rd-party" class="headerlink" title="Builder (3rd party)"></a>Builder (3rd party)</h2><p><a href="https://github.com/GoogleContainerTools/kaniko" target="_blank" rel="noopener">GoogleContainerTools/kaniko: Build Container Images In Kubernetes</a><br><a href="https://medium.com/@sebgoa/building-docker-images-with-kaniko-6e2421b018" target="_blank" rel="noopener">Building Docker images with Kaniko ‚Äì Sebastien Goasguen ‚Äì Medium</a></p>
<h2 id="Tiny-Image"><a href="#Tiny-Image" class="headerlink" title="Tiny Image"></a>Tiny Image</h2><p><a href="http://blog.xebia.com/create-the-smallest-possible-docker-container/" target="_blank" rel="noopener">Create the smallest possible Docker container | Xebia Blog</a> with statically linked Go executables<br><a href="http://blog.xebia.com/how-to-create-the-smallest-possible-docker-container-of-any-image/" target="_blank" rel="noopener">How to create the smallest possible docker container of any image | Xebia Blog</a><br><a href="https://medium.com/@adriaandejonge/simplify-the-smallest-possible-docker-image-62c0e0d342ef" target="_blank" rel="noopener">Simplify the Smallest Possible Docker Image ‚Äì Adriaan de Jonge ‚Äì Medium</a><br><a href="https://medium.com/@kelseyhightower/optimizing-docker-images-for-static-binaries-b5696e26eb07" target="_blank" rel="noopener">Building Docker Images for Static Go Binaries ‚Äî Medium</a><br><a href="http://fosiki.com/blog/2015/04/28/slim-application-containers-using-docker/" target="_blank" rel="noopener">Slim application containers (using Docker) | fosiki</a><br><a href="https://blog.codeship.com/reduce-docker-image-size/" target="_blank" rel="noopener">Reducing Your Docker Image Size - via @codeship | via @codeship</a><br><a href="https://www.ctl.io/developers/blog/post/optimizing-docker-images/" target="_blank" rel="noopener">Optimizing Docker Images - CenturyLink Cloud Developer Center</a><br><a href="https://github.com/William-Yeh/docker-mini" target="_blank" rel="noopener">William-Yeh/docker-mini: Quest for minimal Docker images: slides and lab materials.</a><br><a href="http://blog.takipi.com/lean-mean-java-virtual-machine-making-your-docker-7x-lighter-with-alpine-linux/" target="_blank" rel="noopener">Alpine Linux: Lightweight Docker Java Images | Takipi Blog</a><br><a href="https://blog.replicated.com/refactoring-a-dockerfile-for-image-size/" target="_blank" rel="noopener">Refactoring a Dockerfile for image size</a><br><a href="https://learnk8s.io/blog/smaller-docker-images/" target="_blank" rel="noopener">3 simple tricks for smaller Docker images ‚ô¶Ô∏é Learnk8s</a><br><a href="https://github.com/GoogleContainerTools/distroless" target="_blank" rel="noopener">GoogleContainerTools/distroless: ü•ë Language focused docker images, minus the operating system.</a></p>
<p><a href="http://jasonwilder.com/blog/2014/08/19/squashing-docker-images/" target="_blank" rel="noopener">Squashing Docker Images ¬∑</a><br><a href="https://github.com/jwilder/docker-squash" target="_blank" rel="noopener">jwilder/docker-squash: Squash docker images to make them smaller</a><br><code>docker commit; docker save image | docker-squash -t newtag | docker load</code><br><a href="https://github.com/aidanhs/dlgrab" target="_blank" rel="noopener">aidanhs/dlgrab: docker layer grabber</a><br><a href="https://github.com/cloudimmunity/docker-slim" target="_blank" rel="noopener">cloudimmunity/docker-slim: Optimize and secure your Docker containers</a><br><a href="https://github.com/djosephsen/skinnywhale" target="_blank" rel="noopener">djosephsen/skinnywhale: Skinnywhale helps you make smaller (as in megabytes) Docker containers</a><br><a href="https://github.com/mvanholsteijn/strip-docker-image" target="_blank" rel="noopener">mvanholsteijn/strip-docker-image: Utility to strip Docker images to their bare minimum size.</a><br><a href="https://github.com/Blitznote/debase" target="_blank" rel="noopener">Blitznote/debase: üì¶ minimal Ubuntu for containers, with curl and support for TLSv1.3</a></p>
<p><a href="https://embano1.github.io/post/scratch" target="_blank" rel="noopener">Inside Docker&#39;s &quot;FROM scratch&quot; ¬∑ Do not go gentle into this good night. Rage.</a><br><a href="https://blog.docker.com/2013/06/create-light-weight-docker-containers-buildroot/" target="_blank" rel="noopener">Create lightweight Docker containers with Buildroot | Docker Blog</a></p>
<p><a href="https://www.aerofs.com/introducing-gockerize-md/" target="_blank" rel="noopener">Introducing gockerize | AeroFS</a><br><a href="https://github.com/redbooth/gockerize" target="_blank" rel="noopener">redbooth/gockerize: Package golang service into minimal docker containers.</a></p>
<p>On the contrary:<br><a href="http://matthewkwilliams.com/index.php/2015/04/19/docker-containers-smaller-is-not-always-better/" target="_blank" rel="noopener">Docker Containers: Smaller is not always better ¬ª Ramblings</a></p>
<h3 id="Containerizing-Build-environment"><a href="#Containerizing-Build-environment" class="headerlink" title="Containerizing Build environment"></a>Containerizing Build environment</h3><p><a href="http://www.habitus.io/" target="_blank" rel="noopener">Habitus |Build Flow Tool for Docker</a><br><a href="https://github.com/cisco/elsy" target="_blank" rel="noopener">cisco/elsy: An opinionated, multi-language, build tool based on Docker and Docker Compose</a></p>
<p><a href="https://codefresh.io/blog/java_docker_pipeline/" target="_blank" rel="noopener">Crafting perfect Java Docker build flow - Codefresh</a><br><a href="https://github.com/redbooth/gockerize" target="_blank" rel="noopener">redbooth/gockerize: Package golang service into minimal docker containers.</a></p>
<blockquote>
<p>my presentation and repo</p>
</blockquote>
<h3 id="Iron-io"><a href="#Iron-io" class="headerlink" title="Iron.io"></a>Iron.io</h3><p><a href="http://thenewstack.io/microcontainers-iron-ios-new-hack-shrink-docker-containers/" target="_blank" rel="noopener">Microcontainers: Iron.io&#39;s New Hack to Shrink Docker Containers - The New Stack</a><br><a href="http://www.iron.io/microcontainers-tiny-portable-containers/" target="_blank" rel="noopener">Microcontainers - Tiny, Portable Docker Containers | Iron.ioIron.io</a><br><a href="http://www.iron.io/an-easier-way-to-create-tiny-golang-docker-images/" target="_blank" rel="noopener">An Easier Way to Create Tiny Golang Docker Images | Iron.ioIron.io</a></p>
<h2 id="Tips-and-Tricks"><a href="#Tips-and-Tricks" class="headerlink" title="Tips and Tricks"></a>Tips and Tricks</h2><p><a href="https://success.docker.com/solutions#appguide" target="_blank" rel="noopener">Docker - Application Guides</a><br><a href="https://blog.docker.com/2018/07/introducing-docker-application-guides/" target="_blank" rel="noopener">Introducing Docker Application Guides - Docker Blog</a></p>
<p><a href="https://dev.to/azure/improve-your-docker-workflow-with-this-vs-code-extension-j60" target="_blank" rel="noopener">Improve your Docker workflow with this VS Code extension - DEV Community üë©‚Äçüíªüë®‚Äçüíª</a></p>
<p><a href="https://www.youtube.com/watch?v=BJT9bA64Hcc" target="_blank" rel="noopener">15 Docker Tips in 15 Minutes - YouTube</a><br><a href="https://www.infoworld.com/article/2966158/docker/8-great-tools-that-make-docker-better.html" target="_blank" rel="noopener">8 great tools that make Docker better | InfoWorld</a></p>
<p><a href="https://www.youtube.com/watch?v=1vgi51f0tCk&index=8&list=PLkA60AVN3hh_dZhew2ypUarxhsh9T7ZEd" target="_blank" rel="noopener">Tips and Tricks of the Docker Captains - YouTube</a><br><a href="http://www.infoworld.com/article/3038675/application-virtualization/youre-doing-it-wrong-5-common-docker-mistakes.html" target="_blank" rel="noopener">You&#39;re doing it wrong: 5 common Docker mistakes | InfoWorld</a><br><a href="https://stackify.com/docker-performance-improvement-tips-and-tricks/amp/" target="_blank" rel="noopener">Docker Performance Improvement: Tips and Tricks</a></p>
<p><a href="https://codefresh.io/blog/everyday-hacks-docker/" target="_blank" rel="noopener">Everyday Hacks for Docker - Codefresh</a><br><a href="http://blog.codeship.com/dockercon-2015-container-hacks-in-docker/" target="_blank" rel="noopener">DockerCon 2015: Container Hacks in Docker | via @codeship</a><br><a href="https://scene-si.org/2016/04/01/how-to-live-inside-a-docker-container/" target="_blank" rel="noopener">How to live inside a docker container? | Tit Petriƒç</a></p>
<p><a href="https://sreeninet.wordpress.com/2017/08/15/docker-features-for-handling-containers-death-and-resurrection/" target="_blank" rel="noopener">Docker features for handling Container‚Äôs death and resurrection | Sreenivas Makam&#39;s Blog</a><br><a href="https://blog.sixeyed.com/docker-healthchecks-why-not-to-use-curl-or-iwr/" target="_blank" rel="noopener">Docker healthchecks: why you shouldn&#39;t use <code>curl</code> or <code>iwr</code> | Elton Stoneman</a></p>
<p><a href="https://zwischenzugs.com/2015/06/14/my-favourite-docker-tip/" target="_blank" rel="noopener">My Favourite Docker Tip ‚Äì zwischenzugs</a> add commands in container to history</p>
<p><a href="http://jasonwilder.com/blog/2014/10/13/a-simple-way-to-dockerize-applications/" target="_blank" rel="noopener">A Simple Way To Dockerize Applications ¬∑</a><br><a href="https://github.com/jwilder/dockerize" target="_blank" rel="noopener">jwilder/dockerize: Utility to simplify running applications in docker containers</a><br><a href="https://developers.redhat.com/blog/2017/03/14/java-inside-docker/" target="_blank" rel="noopener">Java inside docker: What you must know to not FAIL - Red Hat Developer Blog</a></p>
<p><a href="https://marmelab.com/blog/2017/02/08/yarn-npm-install-within-docker-container.html" target="_blank" rel="noopener">Npm (or Yarn) Install within a Docker Container, the Right Way</a> tips are actually not Node.js specific<br><a href="https://blog.hasura.io/an-exhaustive-guide-to-writing-dockerfiles-for-node-js-web-apps-bbee6bd2f3c4" target="_blank" rel="noopener">An Exhaustive Guide to Writing Dockerfiles for Node.js Web Apps</a><br><a href="https://kobkrit.com/trick-how-to-reduce-npm-download-time-for-nodejs-web-application-on-docker-image-significantly-87d71f287ab7" target="_blank" rel="noopener">Trick: How to significantly reduce NPM download time for NodeJS Web application on Docker image</a></p>
<p><a href="https://medium.com/@scythargon/cache-for-python-pip-downloads-and-wheels-in-docker-67f24e7cd84e" target="_blank" rel="noopener">Cache for python pip downloads and wheels in Docker</a><br><a href="https://medium.com/bitcraft/dockerizing-a-python-3-flask-app-line-by-line-400aef1ded3a" target="_blank" rel="noopener">Dockerizing a Python 3 Flask App Line-by-Line ‚Äì BitCraft ‚Äì Medium</a></p>
<p>Check Docker logs:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo journalctl -u docker</span><br><span class="line">docker events</span><br></pre></td></tr></table></figure>

<h3 id="Environment-variable-from-files"><a href="#Environment-variable-from-files" class="headerlink" title="Environment variable from files"></a>Environment variable from files</h3><p>If you already have a <code>ENV_FILE</code>, with <code>key=value</code> per line.<br>In <code>entrypoint.sh</code>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">. <span class="variable">$&#123;ENV_FILE&#125;</span></span><br><span class="line"><span class="built_in">export</span> $(cut -d= -f1 <span class="variable">$&#123;V&#125;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># .env loading in the shell</span></span><br><span class="line"><span class="function"><span class="title">dotenv</span></span> () &#123;</span><br><span class="line">  <span class="built_in">set</span> -a</span><br><span class="line">  [ -f <span class="variable">$&#123;ENV_FILE&#125;</span> ] &amp;&amp; . <span class="variable">$&#123;ENV_FILE&#125;</span></span><br><span class="line">  <span class="built_in">set</span> +a</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://unix.stackexchange.com/questions/79064/how-to-export-variables-from-a-file" target="_blank" rel="noopener">bash - How to export variables from a file? - Unix &amp; Linux Stack Exchange</a><br><a href="https://stackoverflow.com/questions/19331497/set-environment-variables-from-file" target="_blank" rel="noopener">bash - Set environment variables from file - Stack Overflow</a></p>
<p><a href="https://medium.freecodecamp.org/how-to-implement-runtime-environment-variables-with-create-react-app-docker-and-nginx-7f9d42a91d70" target="_blank" rel="noopener">How to implement runtime environment variables with create-react-app, Docker, and Nginx</a></p>
<p>If you want to load independent variable from different file (<code>docker secret</code> compatible):</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="built_in">set</span> -euo pipefail</span><br><span class="line"></span><br><span class="line"><span class="comment"># usage: file_env VAR [DEFAULT]</span></span><br><span class="line"><span class="comment">#    ie: file_env 'XYZ_DB_PASSWORD' 'example'</span></span><br><span class="line"><span class="comment"># (will allow for "$XYZ_DB_PASSWORD_FILE" to fill in the value of</span></span><br><span class="line"><span class="comment">#  "$XYZ_DB_PASSWORD" from a file, especially for Docker's secrets feature)</span></span><br><span class="line"><span class="function"><span class="title">file_env</span></span>() &#123;</span><br><span class="line">	<span class="built_in">local</span> var=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">	<span class="built_in">local</span> fileVar=<span class="string">"<span class="variable">$&#123;var&#125;</span>_FILE"</span></span><br><span class="line">	<span class="built_in">local</span> def=<span class="string">"<span class="variable">$&#123;2:-&#125;</span>"</span></span><br><span class="line">	<span class="keyword">if</span> [ <span class="string">"<span class="variable">$&#123;!var:-&#125;</span>"</span> ] &amp;&amp; [ <span class="string">"<span class="variable">$&#123;!fileVar:-&#125;</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> &gt;&amp;2 <span class="string">"error: both <span class="variable">$var</span> and <span class="variable">$fileVar</span> are set (but are exclusive)"</span></span><br><span class="line">		<span class="built_in">exit</span> 1</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	<span class="built_in">local</span> val=<span class="string">"<span class="variable">$def</span>"</span></span><br><span class="line">	<span class="keyword">if</span> [ <span class="string">"<span class="variable">$&#123;!var:-&#125;</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">		val=<span class="string">"<span class="variable">$&#123;!var&#125;</span>"</span></span><br><span class="line">	<span class="keyword">elif</span> [ <span class="string">"<span class="variable">$&#123;!fileVar:-&#125;</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">		val=<span class="string">"<span class="variable">$(&lt; "$&#123;!fileVar&#125;")</span>"</span></span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line">	<span class="built_in">export</span> <span class="string">"<span class="variable">$var</span>"</span>=<span class="string">"<span class="variable">$val</span>"</span></span><br><span class="line">	<span class="built_in">unset</span> <span class="string">"<span class="variable">$fileVar</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">envs=(</span><br><span class="line">	database__connection__host</span><br><span class="line">	database__connection__user</span><br><span class="line">	database__connection__password</span><br><span class="line">	database__connection__database</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">haveConfig=</span><br><span class="line"><span class="keyword">for</span> e <span class="keyword">in</span> <span class="string">"<span class="variable">$&#123;envs[@]&#125;</span>"</span>; <span class="keyword">do</span></span><br><span class="line">	file_env <span class="string">"<span class="variable">$e</span>"</span></span><br><span class="line">	<span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$haveConfig</span>"</span> ] &amp;&amp; [ -n <span class="string">"<span class="variable">$&#123;!e&#125;</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">		haveConfig=1</span><br><span class="line">	<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/docker-library/ghost/issues/125" target="_blank" rel="noopener">Support docker secrets for setting environment variables ¬∑ Issue #125 ¬∑ docker-library/ghost</a><br><a href="https://medium.com/@basi/docker-environment-variables-expanded-from-secrets-8fa70617b3bc" target="_blank" rel="noopener">Docker environment variables expanded from secrets ‚Äì Basilio Vera ‚Äì Medium</a></p>
<h3 id="CMD-vs-ENTRYPOINT"><a href="#CMD-vs-ENTRYPOINT" class="headerlink" title="CMD vs ENTRYPOINT"></a><code>CMD</code> vs <code>ENTRYPOINT</code></h3><p><a href="https://docs.docker.com/engine/reference/builder/#entrypoint" target="_blank" rel="noopener">Dockerfile reference ENTRYPOINT</a><br><a href="https://www.ctl.io/developers/blog/post/dockerfile-entrypoint-vs-cmd/" target="_blank" rel="noopener">Dockerfile: ENTRYPOINT vs CMD - CenturyLink Cloud Developer Center</a><br><a href="https://medium.freecodecamp.org/docker-entrypoint-cmd-dockerfile-best-practices-abc591c30e21" target="_blank" rel="noopener">Docker ENTRYPOINT &amp; CMD: Dockerfile best practices ‚Äì freeCodeCamp.org</a><br><a href="http://stackoverflow.com/questions/21553353/what-is-the-difference-between-cmd-and-entrypoint-in-a-dockerfile" target="_blank" rel="noopener">docker - What is the difference between CMD and ENTRYPOINT in a Dockerfile? - Stack Overflow</a><br><a href="https://blog.codeship.com/understanding-dockers-cmd-and-entrypoint-instructions/" target="_blank" rel="noopener">Understanding Docker&#39;s CMD and ENTRYPOINT Instructions - via @codeship | via @codeship</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># default run invocation</span></span><br><span class="line"><span class="comment"># `ENTRYPOINT CMD` will be executed in container</span></span><br><span class="line">docker run IMAGE CMD</span><br><span class="line"><span class="comment"># override ENTRYPOINT</span></span><br><span class="line">docker run IMAGE --entrypoint ENTRYPOINT CMD</span><br></pre></td></tr></table></figure>

<p>Default <code>ENTRYPOINT</code> is <code>/bin/sh -c</code>, you can override <code>ENTRYPOINT</code> with <code>--entrypoint</code>.<br><code>docker run</code> can specify (override) <code>CMD</code>, akin to passing parameter to the executable specified by <code>ENTRYPOINT</code>.</p>
<p><a href="https://nickjanetakis.com/blog/docker-tip-63-difference-between-an-array-and-string-based-cmd" target="_blank" rel="noopener">Docker Tip #63: Difference between an Array and String Based CMD ‚Äî Nick Janetakis</a></p>
<p><a href="https://stackoverflow.com/questions/28490874/docker-run-image-multiple-commands" target="_blank" rel="noopener">docker run <image> <multiple commands> - Stack Overflow</multiple></image></a> <code>[&quot;sh&quot;, &quot;-c&quot;, &quot;miltiple CMD with &amp;&amp;&quot;]</code><br><a href="https://github.com/docker-library/redmine/issues/52" target="_blank" rel="noopener">Running multiple commands in entrypoint ¬∑ Issue #52 ¬∑ docker-library/redmine</a> can use multiline in Compose file</p>
<h3 id="Executable-Images"><a href="#Executable-Images" class="headerlink" title="Executable Images"></a>Executable Images</h3><p><a href="http://www.infoq.com/articles/docker-executable-images" target="_blank" rel="noopener">Executable Images - How to Dockerize Your Development Machine</a><br><a href="https://blog.ouseful.info/2016/05/03/using-docker-as-a-personal-productvity-tool-running-command-line-apps/" target="_blank" rel="noopener">Using Docker as a Personal Productivity Tool ‚Äì Running Command Line Apps Bundled in Docker Containers | OUseful.Info, the blog...</a><br><a href="https://spin.atomicobject.com/2015/11/30/command-line-tools-docker/" target="_blank" rel="noopener">Distributing Command Line Tools with Docker</a></p>
<p>If you wanted to add arguments to program (<code>CMD</code>), the <code>ENTRYPOINT</code> must be in JSON array notation.</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Dockerfile</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">"binary"</span>, <span class="string">"--"</span>]</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"--help"</span>]</span></span><br></pre></td></tr></table></figure>

<h3 id="Specify-uid-gid"><a href="#Specify-uid-gid" class="headerlink" title="Specify uid,gid"></a>Specify <code>uid</code>,<code>gid</code></h3><p>Use <code>-u</code> to specify the<code>uid</code>,<code>gid</code> in container.</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -it --rm \</span><br><span class="line">  -u $(id -u):$(id -g) \</span><br><span class="line">  -v $(<span class="built_in">pwd</span>):/tmp \</span><br><span class="line">  busybox sh</span><br></pre></td></tr></table></figure>

<p><a href="https://medium.com/@mccode/understanding-how-uid-and-gid-work-in-docker-containers-c37a01d01cf" target="_blank" rel="noopener">Understanding how uid and gid work in Docker containers</a><br><a href="http://gernotklingler.com/blog/docker-replaced-virtual-machines-chroots/" target="_blank" rel="noopener">How docker replaced my virtual machines and chroots - Gernot on developing Software</a> generating image with ${USER}<br><a href="https://github.com/rocker-org/rocker/wiki/managing-users-in-docker" target="_blank" rel="noopener">managing users in docker ¬∑ rocker-org/rocker Wiki</a><br><a href="https://denibertovic.com/posts/handling-permissions-with-docker-volumes/" target="_blank" rel="noopener">Deni Bertovic :: Handling Permissions with Docker Volumes</a><br><a href="http://stackoverflow.com/questions/23544282/what-is-the-best-way-to-manage-permissions-for-docker-shared-volumes" target="_blank" rel="noopener">What is the (best) way to manage permissions for docker shared volumes - Stack Overflow</a><br><a href="https://docs.bitnami.com/containers/how-to/work-with-non-root-containers/" target="_blank" rel="noopener">Work With Non-Root Containers for Bitnami Applications</a></p>
<p>Use user namespaces introduced in 1.10:</p>
<blockquote>
<p>see <code>container-ecosystem.md#security</code></p>
</blockquote>
<h3 id="init-system"><a href="#init-system" class="headerlink" title="init system"></a>init system</h3><p><a href="https://github.com/krallin/tini" target="_blank" rel="noopener">krallin/tini: A tiny but valid <code>init</code> for containers</a> built-in since 1.13+ and CE<br><a href="https://github.com/Yelp/dumb-init/" target="_blank" rel="noopener">Yelp/dumb-init: A minimal init system for Linux containers</a></p>
<p><a href="https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/" target="_blank" rel="noopener">Docker and the PID 1 zombie reaping problem</a><br><a href="https://github.com/krallin/tini/issues/8#issuecomment-146135930" target="_blank" rel="noopener">What is advantage of Tini? ¬∑ Issue #8 ¬∑ krallin/tini</a></p>
<h3 id="Supervisor-connection-refused"><a href="#Supervisor-connection-refused" class="headerlink" title="Supervisor connection refused"></a>Supervisor connection refused</h3><p>OverlayFS have problem creating Unix socket, add <code>--tmpfs /var/run/</code> in <code>docker run</code>.</p>
<p><a href="https://github.com/Supervisor/supervisor/issues/654" target="_blank" rel="noopener">https://github.com/Supervisor/supervisor/issues/654</a><br><a href="https://github.com/moby/moby/issues/12080" target="_blank" rel="noopener">https://github.com/moby/moby/issues/12080</a></p>
<h3 id="User-Namespaces"><a href="#User-Namespaces" class="headerlink" title="User Namespaces"></a>User Namespaces</h3><p>Remap a host user to root in container with <code>--userns-remap</code>.</p>
<p><a href="https://success.docker.com/article/Introduction_to_User_Namespaces_in_Docker_Engine" target="_blank" rel="noopener">Docker - Introduction to User Namespaces in Docker Engine</a><br><a href="https://lwn.net/Articles/700422/" target="_blank" rel="noopener">Filesystem images and unprivileged containers [LWN.net]</a></p>
<p><a href="https://github.com/moby/moby/issues/28593" target="_blank" rel="noopener">User namespaces - Phase 2 ¬∑ Issue #28593 ¬∑ moby/moby</a><br><a href="https://github.com/moby/moby/issues/27629" target="_blank" rel="noopener">Failed to mount /sys/fs/cgroup when user namespace is enabled. ¬∑ Issue #27629 ¬∑ moby/moby</a><br><a href="https://github.com/moby/moby/issues/26070" target="_blank" rel="noopener">User namespaces don&#39;t work if there is a mount on /proc ¬∑ Issue #26070 ¬∑ moby/moby</a><br><a href="https://github.com/moby/moby/issues/22633" target="_blank" rel="noopener">docker --userns-remap @ubuntu 16.04 fails ¬∑ Issue #22633 ¬∑ moby/moby</a></p>
<h3 id="Filtering"><a href="#Filtering" class="headerlink" title="Filtering"></a>Filtering</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ docker ps --filter <span class="string">"name=nostalgic"</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">715ebfcee040        busybox             <span class="string">"top"</span>               3 seconds ago       Up 1 second                             i_am_nostalgic</span><br><span class="line">9b6247364a03        busybox             <span class="string">"top"</span>               7 minutes ago       Up 7 minutes                            nostalgic_stallman</span><br><span class="line">673394ef1d4c        busybox             <span class="string">"top"</span>               38 minutes ago      Up 38 minutes                           nostalgic_shockley</span><br><span class="line"></span><br><span class="line">$ docker images --filter=reference=<span class="string">'busy*:*libc'</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">busybox             uclibc              e02e811dd08f        5 weeks ago         1.09 MB</span><br><span class="line">busybox             glibc               21c16b6787c6        5 weeks ago         4.19 MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># note the '/' is required</span></span><br><span class="line">$ docker images --filter=reference=<span class="string">'dpms/*'</span></span><br><span class="line">REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">dpms/dockbeat            latest              316060f478d1        24 hours ago        134MB</span><br><span class="line">dpms/monitor             latest              23e0036ee085        4 days ago          1.25GB</span><br></pre></td></tr></table></figure>

<h3 id="Formatting"><a href="#Formatting" class="headerlink" title="Formatting"></a>Formatting</h3><p>{% raw %}</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># list mounted volumes</span></span><br><span class="line">docker ps -aq | map docker inspect --format <span class="string">"&#123;&#123;.Name&#125;&#125; &#123;&#123;.Mounts&#125;&#125;"</span></span><br><span class="line"><span class="comment"># list network interfaces</span></span><br><span class="line">docker ps -aq | docker inspect --format=<span class="string">"&#123;&#123;range .NetworkSettings.Networks&#125;&#125;&#123;&#123;.IPAddress&#125;&#125;&#123;&#123;end&#125;&#125;"</span></span><br><span class="line"><span class="comment"># show nodes and labels (Swarm mode)</span></span><br><span class="line">docker node ls -q | \</span><br><span class="line">xargs docker node inspect --format <span class="string">'&#123;&#123;.Description.Hostname&#125;&#125; &#123;&#123;with .Spec&#125;&#125;&#123;&#123;.Role&#125;&#125;(&#123;&#123;.Availability&#125;&#125;) &#123;&#123;.Labels&#125;&#125;&#123;&#123;end&#125;&#125;'</span></span><br></pre></td></tr></table></figure>

<p>{% endraw %}</p>
<p>add <code>table</code>, <code>json</code> (<code>--format {{json .}}</code>) prefix for formatting the output</p>
<p>use <code>json</code> directive to inspect fields if default output is table</p>
<p><a href="https://docs.docker.com/engine/admin/formatting/#template-functions" target="_blank" rel="noopener">Format command and log output | Docker Documentation</a><br><a href="https://golang.org/pkg/text/template/" target="_blank" rel="noopener">template - The Go Programming Language</a><br><a href="http://container-solutions.com/docker-inspect-template-magic/" target="_blank" rel="noopener">Docker Inspect Template Magic - Container Solutions</a><br><a href="http://www.container42.com/2016/03/27/docker-quicktip-7-psformat/" target="_blank" rel="noopener">Docker Quicktip #7: docker ps --format ¬∑ Container42</a><br><a href="https://github.com/politeauthority/docker-pretty-ps" target="_blank" rel="noopener">politeauthority/docker-pretty-ps: Tired of that awful super wide &#39;docker ps&#39; output? Go vertical! Try docker-pretty-ps!</a></p>
<p>Links to various formatting options can be found <a href="https://docs.docker.com/engine/reference/commandline/cli/#configuration-files" target="_blank" rel="noopener">here</a>.</p>
<h3 id="Batch-operation"><a href="#Batch-operation" class="headerlink" title="Batch operation"></a>Batch operation</h3><p>Batch stop containers:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># in case admin script/orchestrator failed to stop the stack properly</span></span><br><span class="line">docker ps -f <span class="string">"name=dpms19-*"</span> -q | xargs -r docker rm -f</span><br></pre></td></tr></table></figure>

<p>Batch remove images:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># this may not work if there is multiple tag pointing to the same image hash</span></span><br><span class="line">docker images --filter=reference=<span class="string">"dpms/*:2.4.*"</span> -q | xargs -r docker rmi</span><br><span class="line"><span class="comment"># remove by label, requires `jq`</span></span><br><span class="line">docker images -f reference=<span class="string">"dpms/*:2.4.*"</span> --format <span class="string">"&#123;&#123;json .&#125;&#125;"</span> | jq <span class="string">'.Repository + ":" + .Tag'</span> | xargs -r docker rmi</span><br></pre></td></tr></table></figure>

<h3 id="Restart-Policy"><a href="#Restart-Policy" class="headerlink" title="Restart Policy"></a>Restart Policy</h3><p><a href="https://blog.codeship.com/ensuring-containers-are-always-running-with-dockers-restart-policy/" target="_blank" rel="noopener">Ensuring Containers Are Always Running with Docker&#39;s Restart Policy - via @codeship | via @codeship</a></p>
<h3 id="dexec"><a href="#dexec" class="headerlink" title="dexec"></a>dexec</h3><p><a href="https://github.com/ahmetalpbalkan/go-dexec/" target="_blank" rel="noopener">ahmetalpbalkan/go-dexec: It&#39;s like Go os/exec package but for Docker</a><br><a href="https://ahmetalpbalkan.com/blog/dexec" target="_blank" rel="noopener">Introducing dexec</a></p>
<h3 id="Docker-in-Docker"><a href="#Docker-in-Docker" class="headerlink" title="Docker in Docker"></a>Docker in Docker</h3><p><a href="https://github.com/jpetazzo/dind" target="_blank" rel="noopener">jpetazzo/dind: Docker in Docker</a> OBSOLETED by official <a href="https://hub.docker.com/_/docker/" target="_blank" rel="noopener">docker image</a> in <code>dind</code> favor</p>
<p><a href="http://callistaenterprise.se/blogg/teknik/2017/12/18/docker-in-swarm-mode-on-docker-in-docker/" target="_blank" rel="noopener">Setting up a Docker Swarm cluster using Docker in Docker | Callista Enterprise</a><br><a href="http://callistaenterprise.se/blogg/teknik/2017/12/20/kubernetes-on-docker-in-docker/" target="_blank" rel="noopener">Setting up a Kubernetes cluster using Docker in Docker | Callista Enterprise</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run --privileged -d docker:dind</span><br><span class="line"></span><br><span class="line">docker run --privileged -it --rm docker:dind --storage-driver=$(docker info -f <span class="string">'&#123;&#123;.Driver&#125;&#125;'</span>)</span><br><span class="line">docker run --privileged -it --rm --entrypoint sh docker:dind</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># start a docker daemon in docker</span></span><br><span class="line">docker run --privileged --name dind -d docker:dind</span><br><span class="line"><span class="comment"># docker clients using dind</span></span><br><span class="line">docker run --link dind docker docker run -d nginx</span><br><span class="line">docker run --link dind docker docker ps</span><br></pre></td></tr></table></figure>

<p><a href="http://jpetazzo.github.io/2016/04/03/one-container-to-rule-them-all/" target="_blank" rel="noopener">One container to rule them all</a></p>
<ul>
<li>create containers from a container;</li>
<li>allow a container to be able to interact with your overall Docker setup;</li>
<li>implementation of a replication controller in a container</li>
</ul>
<p><a href="http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/" target="_blank" rel="noopener">Using Docker-in-Docker for your CI or testing environment? Think twice.</a><br>For CI, the simple solution is o:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker run -v /var/run/docker.sock:/var/run/docker.sock docker ...</span><br></pre></td></tr></table></figure>

<p>But the container can mess with the host docker daemon.</p>
<p><a href="https://github.com/sameersbn/docker-gitlab-ci-runner/issues/9#issuecomment-67925817" target="_blank" rel="noopener">Docker inside the CI runner? ¬∑ Issue #9 ¬∑ sameersbn/docker-gitlab-ci-runner</a><br><a href="https://github.com/justone/dockviz" target="_blank" rel="noopener">justone/dockviz</a></p>
<h3 id="update-docker-images"><a href="#update-docker-images" class="headerlink" title="update docker images"></a>update docker images</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker images | grep -v <span class="string">'&lt;none&gt;'</span> | awk <span class="string">'NR&gt;1 &#123;print $1":"$2&#125;'</span> | xargs -L1 -r docker pull</span><br></pre></td></tr></table></figure>

<h3 id="cleanup-Docker"><a href="#cleanup-Docker" class="headerlink" title="cleanup Docker"></a>cleanup Docker</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># clean dangling images</span></span><br><span class="line">docker rmi $(docker images -f dangling=<span class="literal">true</span> -q)</span><br><span class="line"><span class="comment"># clean images without tag</span></span><br><span class="line">docker images -a --no-trunc | grep none | awk <span class="string">'&#123;print $3&#125;'</span> | xargs -L1 -r docker rmi</span><br><span class="line"><span class="comment"># clean exited containers</span></span><br><span class="line">docker ps -a --no-trunc | grep <span class="string">'Exit'</span> | awk <span class="string">'&#123;print $1&#125;'</span> | xargs -L1 -r docker rm</span><br><span class="line"></span><br><span class="line"><span class="comment"># clean all containers</span></span><br><span class="line">docker rm -f $(docker ps -aq)</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/spotify/docker-gc" target="_blank" rel="noopener">spotify/docker-gc: Docker garbage collection of containers and images</a></p>
<p><a href="http://www.projectatomic.io/blog/2015/07/what-are-docker-none-none-images/" target="_blank" rel="noopener">What are Docker <none>:<none> images? ‚Äî Project Atomic</none></none></a><br><a href="https://forums.docker.com/t/how-do-i-remove-orphaned-images/1172" target="_blank" rel="noopener">How do I remove orphaned images? - Open Source Projects / DockerEngine - Docker Forums</a><br><a href="https://forums.docker.com/t/command-to-remove-all-unused-images/20" target="_blank" rel="noopener">Command to remove all unused images - General Discussions / Feature Requests - Docker Forums</a><br><a href="http://blog.stefanxo.com/2014/02/clean-up-after-docker/" target="_blank" rel="noopener">Clean up after Docker by stefanXO</a><br><a href="https://www.brianchristner.io/docker-cleanup-script-comparison/" target="_blank" rel="noopener">Docker Cleanup Scripts Comparison</a></p>
<h3 id="Flatten-layers"><a href="#Flatten-layers" class="headerlink" title="Flatten layers"></a>Flatten layers</h3><p><code>docker export</code> and <code>docker import</code></p>
<p>This will merge the layers and make the image smaller.</p>
<h3 id="Docker-Source-Code"><a href="#Docker-Source-Code" class="headerlink" title="Docker Source Code"></a>Docker Source Code</h3><p><a href="https://github.com/docker/docker" target="_blank" rel="noopener">docker/docker: Docker - the open-source application container engine</a></p>
<p><code>cli/</code>: the CLI<br><code>api/client/</code>: the commands<br><code>server/router</code>: REST API router<br><code>api/server/server.go</code>: the REST API server<br><code>dockerfile/builder.go</code>: Dockerfile parser</p>
<p><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part1" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏ÄÔºâÔºöDocker Êû∂ÊûÑ</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part2" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûê(‰∫å)ÔºöDocker Client ÂàõÂª∫‰∏éÂëΩ‰ª§ÊâßË°å</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part3" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏âÔºâÔºöDocker Daemon ÂêØÂä®</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part4" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂõõÔºâÔºöDocker Daemon ‰πã NewDaemon ÂÆûÁé∞</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part5" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰∫îÔºâÔºöDocker Server ÁöÑÂàõÂª∫</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part6" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂÖ≠ÔºâÔºöDocker Daemon ÁΩëÁªú</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part7" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏ÉÔºâÔºöDocker Container ÁΩëÁªú Ôºà‰∏äÔºâ</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part8" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂÖ´ÔºâÔºöDocker Container ÁΩëÁªúÔºà‰∏ãÔºâ</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part9" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰πùÔºâÔºöDocker ÈïúÂÉè</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part10" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂçÅÔºâÔºöDocker ÈïúÂÉè‰∏ãËΩΩ</a><br><a href="http://www.infoq.com/cn/articles/docker-source-code-analysis-part11" target="_blank" rel="noopener">Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂçÅ‰∏ÄÔºâÔºöÈïúÂÉèÂ≠òÂÇ®</a></p>
<h3 id="Container-as-System-Service"><a href="#Container-as-System-Service" class="headerlink" title="Container as System Service"></a>Container as System Service</h3><p><a href="https://docs.docker.com/engine/admin/host_integration/" target="_blank" rel="noopener">Automatically start containers</a><br><a href="https://lwn.net/Articles/676831/" target="_blank" rel="noopener">Systemd vs. Docker [LWN.net]</a><br><a href="http://openshift.github.io/geard/" target="_blank" rel="noopener">OpenShift Origin - geard</a> <code>systemd</code> integration</p>
<p>systemd service file:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Run pg</span><br><span class="line">After=docker.service</span><br><span class="line">Requires=docker.service</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=30s</span><br><span class="line">ExecStartPre=-/usr/bin/docker kill pg</span><br><span class="line">ExecStartPre=-/usr/bin/docker rm pg</span><br><span class="line">ExecStart=/usr/bin/docker run --rm --name pg --volumes-from pgdata postgres</span><br><span class="line">ExecStop=/usr/bin/docker kill pg</span><br><span class="line">ExecStartPost=-/usr/bin/docker rm pg</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<h3 id="Containerize-App"><a href="#Containerize-App" class="headerlink" title="Containerize App"></a>Containerize App</h3><p><a href="http://singularity.lbl.gov/" target="_blank" rel="noopener">Singularity | Singularity</a><br><a href="http://www.admin-magazine.com/HPC/Articles/HPC-Container-Maker" target="_blank" rel="noopener">Building Containers with HPC Container Maker ¬ª ADMIN Magazine</a></p>
<h3 id="running-GUI-app-in-container"><a href="#running-GUI-app-in-container" class="headerlink" title="running GUI app in container"></a>running GUI app in container</h3><ol>
<li>install <code>xvfb</code></li>
<li>in host, <code>xvfb :88 -screen 0 1366x768x24 -ac</code></li>
<li>in container, <code>DISPLAY:88 firefox</code></li>
</ol>
<p><a href="http://yunlzheng.github.io/2014/10/19/intro-xvfn-ubuntu/" target="_blank" rel="noopener">Â¶Ç‰ΩïÂú® Vagrant/Docker ‰∏≠ËøêË°å Firefox | YL Notes</a></p>
<p><a href="https://blog.docker.com/2013/07/docker-desktop-your-desktop-over-ssh-running-inside-of-a-docker-container/" target="_blank" rel="noopener">Docker Desktop: Your Desktop over ssh running inside of a Docker container | Docker Blog</a><br><a href="https://blog.jessfraz.com/post/docker-containers-on-the-desktop/" target="_blank" rel="noopener">Jessie Frazelle&#39;s Blog: Docker Containers on the Desktop</a><br><a href="https://blog.ouseful.info/2016/05/04/more-docker-doodlings-accessing-gui-apps-via-a-browser-from-a-container-using-guacamole/" target="_blank" rel="noopener">More Docker Doodlings ‚Äì Accessing GUI Apps Via a Browser from a Container Using Guacamole | OUseful.Info, the blog...</a></p>
<p><a href="http://blog.bennycornelissen.nl/bwc-gui-apps-in-docker-on-osx/?" target="_blank" rel="noopener">BWC: GUI apps in Docker on OSX</a></p>
<p><a href="http://gernotklingler.com/blog/howto-get-hardware-accelerated-opengl-support-docker/" target="_blank" rel="noopener">Howto get hardware accelerated OpenGL support in Docker - Gernot on developing Software</a></p>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/container-orchestration/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/container-ecosystem/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">Comments</h2>

  
  	 <div id="disqus_thread">
     <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  	 </div>
  
</section>

	
	</div> <!-- col-md-9/col-md-12 -->
	
	
		<div class="col-md-3"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2014-12-11 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/container/">container<span>11</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/shell-tool/">shell-tool<span>23</span></a></li> <li><a href="/tags/web-deploy/">web-deploy<span>16</span></a></li> <li><a href="/tags/devops/">devops<span>11</span></a></li> <li><a href="/tags/docker/">docker<span>7</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	

</div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2019 leesei
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a> (customized by <a href="https://github.com/leesei/hexo-theme-freemind/tree/leesei.github.io">leesei</a>).
</p>
 </footer>
</div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>‚ñ≤</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<script type="text/javascript">
var disqus_shortname = 'leesei';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
   </html>
